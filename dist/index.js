(()=>{var __webpack_modules__={265:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.issue=exports.issueCommand=void 0;const os=__importStar(__webpack_require__(37));const utils_1=__webpack_require__(570);function issueCommand(command,properties,message){const cmd=new Command(command,properties,message);process.stdout.write(cmd.toString()+os.EOL)}exports.issueCommand=issueCommand;function issue(name,message=""){issueCommand(name,{},message)}exports.issue=issue;const CMD_STRING="::";class Command{constructor(command,properties,message){if(!command){command="missing.command"}this.command=command;this.properties=properties;this.message=message}toString(){let cmdStr=CMD_STRING+this.command;if(this.properties&&Object.keys(this.properties).length>0){cmdStr+=" ";let first=true;for(const key in this.properties){if(this.properties.hasOwnProperty(key)){const val=this.properties[key];if(val){if(first){first=false}else{cmdStr+=","}cmdStr+=`${key}=${escapeProperty(val)}`}}}}cmdStr+=`${CMD_STRING}${escapeData(this.message)}`;return cmdStr}}function escapeData(s){return utils_1.toCommandValue(s).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(s){return utils_1.toCommandValue(s).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},225:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.getIDToken=exports.getState=exports.saveState=exports.group=exports.endGroup=exports.startGroup=exports.info=exports.notice=exports.warning=exports.error=exports.debug=exports.isDebug=exports.setFailed=exports.setCommandEcho=exports.setOutput=exports.getBooleanInput=exports.getMultilineInput=exports.getInput=exports.addPath=exports.setSecret=exports.exportVariable=exports.ExitCode=void 0;const command_1=__webpack_require__(265);const file_command_1=__webpack_require__(108);const utils_1=__webpack_require__(570);const os=__importStar(__webpack_require__(37));const path=__importStar(__webpack_require__(17));const oidc_utils_1=__webpack_require__(526);var ExitCode;(function(ExitCode){ExitCode[ExitCode["Success"]=0]="Success";ExitCode[ExitCode["Failure"]=1]="Failure"})(ExitCode=exports.ExitCode||(exports.ExitCode={}));function exportVariable(name,val){const convertedVal=utils_1.toCommandValue(val);process.env[name]=convertedVal;const filePath=process.env["GITHUB_ENV"]||"";if(filePath){const delimiter="_GitHubActionsFileCommandDelimeter_";const commandValue=`${name}<<${delimiter}${os.EOL}${convertedVal}${os.EOL}${delimiter}`;file_command_1.issueCommand("ENV",commandValue)}else{command_1.issueCommand("set-env",{name},convertedVal)}}exports.exportVariable=exportVariable;function setSecret(secret){command_1.issueCommand("add-mask",{},secret)}exports.setSecret=setSecret;function addPath(inputPath){const filePath=process.env["GITHUB_PATH"]||"";if(filePath){file_command_1.issueCommand("PATH",inputPath)}else{command_1.issueCommand("add-path",{},inputPath)}process.env["PATH"]=`${inputPath}${path.delimiter}${process.env["PATH"]}`}exports.addPath=addPath;function getInput(name,options){const val=process.env[`INPUT_${name.replace(/ /g,"_").toUpperCase()}`]||"";if(options&&options.required&&!val){throw new Error(`Input required and not supplied: ${name}`)}if(options&&options.trimWhitespace===false){return val}return val.trim()}exports.getInput=getInput;function getMultilineInput(name,options){const inputs=getInput(name,options).split("\n").filter((x=>x!==""));return inputs}exports.getMultilineInput=getMultilineInput;function getBooleanInput(name,options){const trueValue=["true","True","TRUE"];const falseValue=["false","False","FALSE"];const val=getInput(name,options);if(trueValue.includes(val))return true;if(falseValue.includes(val))return false;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${name}\n`+`Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}exports.getBooleanInput=getBooleanInput;function setOutput(name,value){process.stdout.write(os.EOL);command_1.issueCommand("set-output",{name},value)}exports.setOutput=setOutput;function setCommandEcho(enabled){command_1.issue("echo",enabled?"on":"off")}exports.setCommandEcho=setCommandEcho;function setFailed(message){process.exitCode=ExitCode.Failure;error(message)}exports.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}exports.isDebug=isDebug;function debug(message){command_1.issueCommand("debug",{},message)}exports.debug=debug;function error(message,properties={}){command_1.issueCommand("error",utils_1.toCommandProperties(properties),message instanceof Error?message.toString():message)}exports.error=error;function warning(message,properties={}){command_1.issueCommand("warning",utils_1.toCommandProperties(properties),message instanceof Error?message.toString():message)}exports.warning=warning;function notice(message,properties={}){command_1.issueCommand("notice",utils_1.toCommandProperties(properties),message instanceof Error?message.toString():message)}exports.notice=notice;function info(message){process.stdout.write(message+os.EOL)}exports.info=info;function startGroup(name){command_1.issue("group",name)}exports.startGroup=startGroup;function endGroup(){command_1.issue("endgroup")}exports.endGroup=endGroup;function group(name,fn){return __awaiter(this,void 0,void 0,(function*(){startGroup(name);let result;try{result=yield fn()}finally{endGroup()}return result}))}exports.group=group;function saveState(name,value){command_1.issueCommand("save-state",{name},value)}exports.saveState=saveState;function getState(name){return process.env[`STATE_${name}`]||""}exports.getState=getState;function getIDToken(aud){return __awaiter(this,void 0,void 0,(function*(){return yield oidc_utils_1.OidcClient.getIDToken(aud)}))}exports.getIDToken=getIDToken;var summary_1=__webpack_require__(410);Object.defineProperty(exports,"summary",{enumerable:true,get:function(){return summary_1.summary}});var summary_2=__webpack_require__(410);Object.defineProperty(exports,"markdownSummary",{enumerable:true,get:function(){return summary_2.markdownSummary}});var path_utils_1=__webpack_require__(340);Object.defineProperty(exports,"toPosixPath",{enumerable:true,get:function(){return path_utils_1.toPosixPath}});Object.defineProperty(exports,"toWin32Path",{enumerable:true,get:function(){return path_utils_1.toWin32Path}});Object.defineProperty(exports,"toPlatformPath",{enumerable:true,get:function(){return path_utils_1.toPlatformPath}})},108:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.issueCommand=void 0;const fs=__importStar(__webpack_require__(147));const os=__importStar(__webpack_require__(37));const utils_1=__webpack_require__(570);function issueCommand(command,message){const filePath=process.env[`GITHUB_${command}`];if(!filePath){throw new Error(`Unable to find environment variable for file command ${command}`)}if(!fs.existsSync(filePath)){throw new Error(`Missing file at path: ${filePath}`)}fs.appendFileSync(filePath,`${utils_1.toCommandValue(message)}${os.EOL}`,{encoding:"utf8"})}exports.issueCommand=issueCommand},526:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.OidcClient=void 0;const http_client_1=__webpack_require__(635);const auth_1=__webpack_require__(429);const core_1=__webpack_require__(225);class OidcClient{static createHttpClient(allowRetry=true,maxRetry=10){const requestOptions={allowRetries:allowRetry,maxRetries:maxRetry};return new http_client_1.HttpClient("actions/oidc-client",[new auth_1.BearerCredentialHandler(OidcClient.getRequestToken())],requestOptions)}static getRequestToken(){const token=process.env["ACTIONS_ID_TOKEN_REQUEST_TOKEN"];if(!token){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable")}return token}static getIDTokenUrl(){const runtimeUrl=process.env["ACTIONS_ID_TOKEN_REQUEST_URL"];if(!runtimeUrl){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable")}return runtimeUrl}static getCall(id_token_url){var _a;return __awaiter(this,void 0,void 0,(function*(){const httpclient=OidcClient.createHttpClient();const res=yield httpclient.getJson(id_token_url).catch((error=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${error.statusCode}\n \n        Error Message: ${error.result.message}`)}));const id_token=(_a=res.result)===null||_a===void 0?void 0:_a.value;if(!id_token){throw new Error("Response json body do not have ID Token field")}return id_token}))}static getIDToken(audience){return __awaiter(this,void 0,void 0,(function*(){try{let id_token_url=OidcClient.getIDTokenUrl();if(audience){const encodedAudience=encodeURIComponent(audience);id_token_url=`${id_token_url}&audience=${encodedAudience}`}core_1.debug(`ID token url is ${id_token_url}`);const id_token=yield OidcClient.getCall(id_token_url);core_1.setSecret(id_token);return id_token}catch(error){throw new Error(`Error message: ${error.message}`)}}))}}exports.OidcClient=OidcClient},340:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.toPlatformPath=exports.toWin32Path=exports.toPosixPath=void 0;const path=__importStar(__webpack_require__(17));function toPosixPath(pth){return pth.replace(/[\\]/g,"/")}exports.toPosixPath=toPosixPath;function toWin32Path(pth){return pth.replace(/[/]/g,"\\")}exports.toWin32Path=toWin32Path;function toPlatformPath(pth){return pth.replace(/[/\\]/g,path.sep)}exports.toPlatformPath=toPlatformPath},410:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.summary=exports.markdownSummary=exports.SUMMARY_DOCS_URL=exports.SUMMARY_ENV_VAR=void 0;const os_1=__webpack_require__(37);const fs_1=__webpack_require__(147);const{access,appendFile,writeFile}=fs_1.promises;exports.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";exports.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class Summary{constructor(){this._buffer=""}filePath(){return __awaiter(this,void 0,void 0,(function*(){if(this._filePath){return this._filePath}const pathFromEnv=process.env[exports.SUMMARY_ENV_VAR];if(!pathFromEnv){throw new Error(`Unable to find environment variable for $${exports.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`)}try{yield access(pathFromEnv,fs_1.constants.R_OK|fs_1.constants.W_OK)}catch(_a){throw new Error(`Unable to access summary file: '${pathFromEnv}'. Check if the file has correct read/write permissions.`)}this._filePath=pathFromEnv;return this._filePath}))}wrap(tag,content,attrs={}){const htmlAttrs=Object.entries(attrs).map((([key,value])=>` ${key}="${value}"`)).join("");if(!content){return`<${tag}${htmlAttrs}>`}return`<${tag}${htmlAttrs}>${content}</${tag}>`}write(options){return __awaiter(this,void 0,void 0,(function*(){const overwrite=!!(options===null||options===void 0?void 0:options.overwrite);const filePath=yield this.filePath();const writeFunc=overwrite?writeFile:appendFile;yield writeFunc(filePath,this._buffer,{encoding:"utf8"});return this.emptyBuffer()}))}clear(){return __awaiter(this,void 0,void 0,(function*(){return this.emptyBuffer().write({overwrite:true})}))}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){this._buffer="";return this}addRaw(text,addEOL=false){this._buffer+=text;return addEOL?this.addEOL():this}addEOL(){return this.addRaw(os_1.EOL)}addCodeBlock(code,lang){const attrs=Object.assign({},lang&&{lang});const element=this.wrap("pre",this.wrap("code",code),attrs);return this.addRaw(element).addEOL()}addList(items,ordered=false){const tag=ordered?"ol":"ul";const listItems=items.map((item=>this.wrap("li",item))).join("");const element=this.wrap(tag,listItems);return this.addRaw(element).addEOL()}addTable(rows){const tableBody=rows.map((row=>{const cells=row.map((cell=>{if(typeof cell==="string"){return this.wrap("td",cell)}const{header,data,colspan,rowspan}=cell;const tag=header?"th":"td";const attrs=Object.assign(Object.assign({},colspan&&{colspan}),rowspan&&{rowspan});return this.wrap(tag,data,attrs)})).join("");return this.wrap("tr",cells)})).join("");const element=this.wrap("table",tableBody);return this.addRaw(element).addEOL()}addDetails(label,content){const element=this.wrap("details",this.wrap("summary",label)+content);return this.addRaw(element).addEOL()}addImage(src,alt,options){const{width,height}=options||{};const attrs=Object.assign(Object.assign({},width&&{width}),height&&{height});const element=this.wrap("img",null,Object.assign({src,alt},attrs));return this.addRaw(element).addEOL()}addHeading(text,level){const tag=`h${level}`;const allowedTag=["h1","h2","h3","h4","h5","h6"].includes(tag)?tag:"h1";const element=this.wrap(allowedTag,text);return this.addRaw(element).addEOL()}addSeparator(){const element=this.wrap("hr",null);return this.addRaw(element).addEOL()}addBreak(){const element=this.wrap("br",null);return this.addRaw(element).addEOL()}addQuote(text,cite){const attrs=Object.assign({},cite&&{cite});const element=this.wrap("blockquote",text,attrs);return this.addRaw(element).addEOL()}addLink(text,href){const element=this.wrap("a",text,{href});return this.addRaw(element).addEOL()}}const _summary=new Summary;exports.markdownSummary=_summary;exports.summary=_summary},570:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toCommandProperties=exports.toCommandValue=void 0;function toCommandValue(input){if(input===null||input===undefined){return""}else if(typeof input==="string"||input instanceof String){return input}return JSON.stringify(input)}exports.toCommandValue=toCommandValue;function toCommandProperties(annotationProperties){if(!Object.keys(annotationProperties).length){return{}}return{title:annotationProperties.title,file:annotationProperties.file,line:annotationProperties.startLine,endLine:annotationProperties.endLine,col:annotationProperties.startColumn,endColumn:annotationProperties.endColumn}}exports.toCommandProperties=toCommandProperties},27:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.getExecOutput=exports.exec=void 0;const string_decoder_1=__webpack_require__(576);const tr=__importStar(__webpack_require__(171));function exec(commandLine,args,options){return __awaiter(this,void 0,void 0,(function*(){const commandArgs=tr.argStringToArray(commandLine);if(commandArgs.length===0){throw new Error(`Parameter 'commandLine' cannot be null or empty.`)}const toolPath=commandArgs[0];args=commandArgs.slice(1).concat(args||[]);const runner=new tr.ToolRunner(toolPath,args,options);return runner.exec()}))}exports.exec=exec;function getExecOutput(commandLine,args,options){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){let stdout="";let stderr="";const stdoutDecoder=new string_decoder_1.StringDecoder("utf8");const stderrDecoder=new string_decoder_1.StringDecoder("utf8");const originalStdoutListener=(_a=options===null||options===void 0?void 0:options.listeners)===null||_a===void 0?void 0:_a.stdout;const originalStdErrListener=(_b=options===null||options===void 0?void 0:options.listeners)===null||_b===void 0?void 0:_b.stderr;const stdErrListener=data=>{stderr+=stderrDecoder.write(data);if(originalStdErrListener){originalStdErrListener(data)}};const stdOutListener=data=>{stdout+=stdoutDecoder.write(data);if(originalStdoutListener){originalStdoutListener(data)}};const listeners=Object.assign(Object.assign({},options===null||options===void 0?void 0:options.listeners),{stdout:stdOutListener,stderr:stdErrListener});const exitCode=yield exec(commandLine,args,Object.assign(Object.assign({},options),{listeners}));stdout+=stdoutDecoder.end();stderr+=stderrDecoder.end();return{exitCode,stdout,stderr}}))}exports.getExecOutput=getExecOutput},171:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.argStringToArray=exports.ToolRunner=void 0;const os=__importStar(__webpack_require__(37));const events=__importStar(__webpack_require__(361));const child=__importStar(__webpack_require__(81));const path=__importStar(__webpack_require__(17));const io=__importStar(__webpack_require__(484));const ioUtil=__importStar(__webpack_require__(564));const timers_1=__webpack_require__(512);const IS_WINDOWS=process.platform==="win32";class ToolRunner extends events.EventEmitter{constructor(toolPath,args,options){super();if(!toolPath){throw new Error("Parameter 'toolPath' cannot be null or empty.")}this.toolPath=toolPath;this.args=args||[];this.options=options||{}}_debug(message){if(this.options.listeners&&this.options.listeners.debug){this.options.listeners.debug(message)}}_getCommandString(options,noPrefix){const toolPath=this._getSpawnFileName();const args=this._getSpawnArgs(options);let cmd=noPrefix?"":"[command]";if(IS_WINDOWS){if(this._isCmdFile()){cmd+=toolPath;for(const a of args){cmd+=` ${a}`}}else if(options.windowsVerbatimArguments){cmd+=`"${toolPath}"`;for(const a of args){cmd+=` ${a}`}}else{cmd+=this._windowsQuoteCmdArg(toolPath);for(const a of args){cmd+=` ${this._windowsQuoteCmdArg(a)}`}}}else{cmd+=toolPath;for(const a of args){cmd+=` ${a}`}}return cmd}_processLineBuffer(data,strBuffer,onLine){try{let s=strBuffer+data.toString();let n=s.indexOf(os.EOL);while(n>-1){const line=s.substring(0,n);onLine(line);s=s.substring(n+os.EOL.length);n=s.indexOf(os.EOL)}return s}catch(err){this._debug(`error processing line. Failed with error ${err}`);return""}}_getSpawnFileName(){if(IS_WINDOWS){if(this._isCmdFile()){return process.env["COMSPEC"]||"cmd.exe"}}return this.toolPath}_getSpawnArgs(options){if(IS_WINDOWS){if(this._isCmdFile()){let argline=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const a of this.args){argline+=" ";argline+=options.windowsVerbatimArguments?a:this._windowsQuoteCmdArg(a)}argline+='"';return[argline]}}return this.args}_endsWith(str,end){return str.endsWith(end)}_isCmdFile(){const upperToolPath=this.toolPath.toUpperCase();return this._endsWith(upperToolPath,".CMD")||this._endsWith(upperToolPath,".BAT")}_windowsQuoteCmdArg(arg){if(!this._isCmdFile()){return this._uvQuoteCmdArg(arg)}if(!arg){return'""'}const cmdSpecialChars=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let needsQuotes=false;for(const char of arg){if(cmdSpecialChars.some((x=>x===char))){needsQuotes=true;break}}if(!needsQuotes){return arg}let reverse='"';let quoteHit=true;for(let i=arg.length;i>0;i--){reverse+=arg[i-1];if(quoteHit&&arg[i-1]==="\\"){reverse+="\\"}else if(arg[i-1]==='"'){quoteHit=true;reverse+='"'}else{quoteHit=false}}reverse+='"';return reverse.split("").reverse().join("")}_uvQuoteCmdArg(arg){if(!arg){return'""'}if(!arg.includes(" ")&&!arg.includes("\t")&&!arg.includes('"')){return arg}if(!arg.includes('"')&&!arg.includes("\\")){return`"${arg}"`}let reverse='"';let quoteHit=true;for(let i=arg.length;i>0;i--){reverse+=arg[i-1];if(quoteHit&&arg[i-1]==="\\"){reverse+="\\"}else if(arg[i-1]==='"'){quoteHit=true;reverse+="\\"}else{quoteHit=false}}reverse+='"';return reverse.split("").reverse().join("")}_cloneExecOptions(options){options=options||{};const result={cwd:options.cwd||process.cwd(),env:options.env||process.env,silent:options.silent||false,windowsVerbatimArguments:options.windowsVerbatimArguments||false,failOnStdErr:options.failOnStdErr||false,ignoreReturnCode:options.ignoreReturnCode||false,delay:options.delay||1e4};result.outStream=options.outStream||process.stdout;result.errStream=options.errStream||process.stderr;return result}_getSpawnOptions(options,toolPath){options=options||{};const result={};result.cwd=options.cwd;result.env=options.env;result["windowsVerbatimArguments"]=options.windowsVerbatimArguments||this._isCmdFile();if(options.windowsVerbatimArguments){result.argv0=`"${toolPath}"`}return result}exec(){return __awaiter(this,void 0,void 0,(function*(){if(!ioUtil.isRooted(this.toolPath)&&(this.toolPath.includes("/")||IS_WINDOWS&&this.toolPath.includes("\\"))){this.toolPath=path.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)}this.toolPath=yield io.which(this.toolPath,true);return new Promise(((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){this._debug(`exec tool: ${this.toolPath}`);this._debug("arguments:");for(const arg of this.args){this._debug(`   ${arg}`)}const optionsNonNull=this._cloneExecOptions(this.options);if(!optionsNonNull.silent&&optionsNonNull.outStream){optionsNonNull.outStream.write(this._getCommandString(optionsNonNull)+os.EOL)}const state=new ExecState(optionsNonNull,this.toolPath);state.on("debug",(message=>{this._debug(message)}));if(this.options.cwd&&!(yield ioUtil.exists(this.options.cwd))){return reject(new Error(`The cwd: ${this.options.cwd} does not exist!`))}const fileName=this._getSpawnFileName();const cp=child.spawn(fileName,this._getSpawnArgs(optionsNonNull),this._getSpawnOptions(this.options,fileName));let stdbuffer="";if(cp.stdout){cp.stdout.on("data",(data=>{if(this.options.listeners&&this.options.listeners.stdout){this.options.listeners.stdout(data)}if(!optionsNonNull.silent&&optionsNonNull.outStream){optionsNonNull.outStream.write(data)}stdbuffer=this._processLineBuffer(data,stdbuffer,(line=>{if(this.options.listeners&&this.options.listeners.stdline){this.options.listeners.stdline(line)}}))}))}let errbuffer="";if(cp.stderr){cp.stderr.on("data",(data=>{state.processStderr=true;if(this.options.listeners&&this.options.listeners.stderr){this.options.listeners.stderr(data)}if(!optionsNonNull.silent&&optionsNonNull.errStream&&optionsNonNull.outStream){const s=optionsNonNull.failOnStdErr?optionsNonNull.errStream:optionsNonNull.outStream;s.write(data)}errbuffer=this._processLineBuffer(data,errbuffer,(line=>{if(this.options.listeners&&this.options.listeners.errline){this.options.listeners.errline(line)}}))}))}cp.on("error",(err=>{state.processError=err.message;state.processExited=true;state.processClosed=true;state.CheckComplete()}));cp.on("exit",(code=>{state.processExitCode=code;state.processExited=true;this._debug(`Exit code ${code} received from tool '${this.toolPath}'`);state.CheckComplete()}));cp.on("close",(code=>{state.processExitCode=code;state.processExited=true;state.processClosed=true;this._debug(`STDIO streams have closed for tool '${this.toolPath}'`);state.CheckComplete()}));state.on("done",((error,exitCode)=>{if(stdbuffer.length>0){this.emit("stdline",stdbuffer)}if(errbuffer.length>0){this.emit("errline",errbuffer)}cp.removeAllListeners();if(error){reject(error)}else{resolve(exitCode)}}));if(this.options.input){if(!cp.stdin){throw new Error("child process missing stdin")}cp.stdin.end(this.options.input)}}))))}))}}exports.ToolRunner=ToolRunner;function argStringToArray(argString){const args=[];let inQuotes=false;let escaped=false;let arg="";function append(c){if(escaped&&c!=='"'){arg+="\\"}arg+=c;escaped=false}for(let i=0;i<argString.length;i++){const c=argString.charAt(i);if(c==='"'){if(!escaped){inQuotes=!inQuotes}else{append(c)}continue}if(c==="\\"&&escaped){append(c);continue}if(c==="\\"&&inQuotes){escaped=true;continue}if(c===" "&&!inQuotes){if(arg.length>0){args.push(arg);arg=""}continue}append(c)}if(arg.length>0){args.push(arg.trim())}return args}exports.argStringToArray=argStringToArray;class ExecState extends events.EventEmitter{constructor(options,toolPath){super();this.processClosed=false;this.processError="";this.processExitCode=0;this.processExited=false;this.processStderr=false;this.delay=1e4;this.done=false;this.timeout=null;if(!toolPath){throw new Error("toolPath must not be empty")}this.options=options;this.toolPath=toolPath;if(options.delay){this.delay=options.delay}}CheckComplete(){if(this.done){return}if(this.processClosed){this._setResult()}else if(this.processExited){this.timeout=timers_1.setTimeout(ExecState.HandleTimeout,this.delay,this)}}_debug(message){this.emit("debug",message)}_setResult(){let error;if(this.processExited){if(this.processError){error=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`)}else if(this.processExitCode!==0&&!this.options.ignoreReturnCode){error=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)}else if(this.processStderr&&this.options.failOnStdErr){error=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)}}if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.done=true;this.emit("done",error,this.processExitCode)}static HandleTimeout(state){if(state.done){return}if(!state.processClosed&&state.processExited){const message=`The STDIO streams did not close within ${state.delay/1e3} seconds of the exit event from process '${state.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;state._debug(message)}state._setResult()}}},429:function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.PersonalAccessTokenCredentialHandler=exports.BearerCredentialHandler=exports.BasicCredentialHandler=void 0;class BasicCredentialHandler{constructor(username,password){this.username=username;this.password=password}prepareRequest(options){if(!options.headers){throw Error("The request has no headers")}options.headers["Authorization"]=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return __awaiter(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}exports.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(token){this.token=token}prepareRequest(options){if(!options.headers){throw Error("The request has no headers")}options.headers["Authorization"]=`Bearer ${this.token}`}canHandleAuthentication(){return false}handleAuthentication(){return __awaiter(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}exports.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(token){this.token=token}prepareRequest(options){if(!options.headers){throw Error("The request has no headers")}options.headers["Authorization"]=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return __awaiter(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}exports.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},635:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.HttpClient=exports.isHttps=exports.HttpClientResponse=exports.HttpClientError=exports.getProxyUrl=exports.MediaTypes=exports.Headers=exports.HttpCodes=void 0;const http=__importStar(__webpack_require__(685));const https=__importStar(__webpack_require__(687));const pm=__importStar(__webpack_require__(960));const tunnel=__importStar(__webpack_require__(149));var HttpCodes;(function(HttpCodes){HttpCodes[HttpCodes["OK"]=200]="OK";HttpCodes[HttpCodes["MultipleChoices"]=300]="MultipleChoices";HttpCodes[HttpCodes["MovedPermanently"]=301]="MovedPermanently";HttpCodes[HttpCodes["ResourceMoved"]=302]="ResourceMoved";HttpCodes[HttpCodes["SeeOther"]=303]="SeeOther";HttpCodes[HttpCodes["NotModified"]=304]="NotModified";HttpCodes[HttpCodes["UseProxy"]=305]="UseProxy";HttpCodes[HttpCodes["SwitchProxy"]=306]="SwitchProxy";HttpCodes[HttpCodes["TemporaryRedirect"]=307]="TemporaryRedirect";HttpCodes[HttpCodes["PermanentRedirect"]=308]="PermanentRedirect";HttpCodes[HttpCodes["BadRequest"]=400]="BadRequest";HttpCodes[HttpCodes["Unauthorized"]=401]="Unauthorized";HttpCodes[HttpCodes["PaymentRequired"]=402]="PaymentRequired";HttpCodes[HttpCodes["Forbidden"]=403]="Forbidden";HttpCodes[HttpCodes["NotFound"]=404]="NotFound";HttpCodes[HttpCodes["MethodNotAllowed"]=405]="MethodNotAllowed";HttpCodes[HttpCodes["NotAcceptable"]=406]="NotAcceptable";HttpCodes[HttpCodes["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";HttpCodes[HttpCodes["RequestTimeout"]=408]="RequestTimeout";HttpCodes[HttpCodes["Conflict"]=409]="Conflict";HttpCodes[HttpCodes["Gone"]=410]="Gone";HttpCodes[HttpCodes["TooManyRequests"]=429]="TooManyRequests";HttpCodes[HttpCodes["InternalServerError"]=500]="InternalServerError";HttpCodes[HttpCodes["NotImplemented"]=501]="NotImplemented";HttpCodes[HttpCodes["BadGateway"]=502]="BadGateway";HttpCodes[HttpCodes["ServiceUnavailable"]=503]="ServiceUnavailable";HttpCodes[HttpCodes["GatewayTimeout"]=504]="GatewayTimeout"})(HttpCodes=exports.HttpCodes||(exports.HttpCodes={}));var Headers;(function(Headers){Headers["Accept"]="accept";Headers["ContentType"]="content-type"})(Headers=exports.Headers||(exports.Headers={}));var MediaTypes;(function(MediaTypes){MediaTypes["ApplicationJson"]="application/json"})(MediaTypes=exports.MediaTypes||(exports.MediaTypes={}));function getProxyUrl(serverUrl){const proxyUrl=pm.getProxyUrl(new URL(serverUrl));return proxyUrl?proxyUrl.href:""}exports.getProxyUrl=getProxyUrl;const HttpRedirectCodes=[HttpCodes.MovedPermanently,HttpCodes.ResourceMoved,HttpCodes.SeeOther,HttpCodes.TemporaryRedirect,HttpCodes.PermanentRedirect];const HttpResponseRetryCodes=[HttpCodes.BadGateway,HttpCodes.ServiceUnavailable,HttpCodes.GatewayTimeout];const RetryableHttpVerbs=["OPTIONS","GET","DELETE","HEAD"];const ExponentialBackoffCeiling=10;const ExponentialBackoffTimeSlice=5;class HttpClientError extends Error{constructor(message,statusCode){super(message);this.name="HttpClientError";this.statusCode=statusCode;Object.setPrototypeOf(this,HttpClientError.prototype)}}exports.HttpClientError=HttpClientError;class HttpClientResponse{constructor(message){this.message=message}readBody(){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve=>__awaiter(this,void 0,void 0,(function*(){let output=Buffer.alloc(0);this.message.on("data",(chunk=>{output=Buffer.concat([output,chunk])}));this.message.on("end",(()=>{resolve(output.toString())}))}))))}))}}exports.HttpClientResponse=HttpClientResponse;function isHttps(requestUrl){const parsedUrl=new URL(requestUrl);return parsedUrl.protocol==="https:"}exports.isHttps=isHttps;class HttpClient{constructor(userAgent,handlers,requestOptions){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=userAgent;this.handlers=handlers||[];this.requestOptions=requestOptions;if(requestOptions){if(requestOptions.ignoreSslError!=null){this._ignoreSslError=requestOptions.ignoreSslError}this._socketTimeout=requestOptions.socketTimeout;if(requestOptions.allowRedirects!=null){this._allowRedirects=requestOptions.allowRedirects}if(requestOptions.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=requestOptions.allowRedirectDowngrade}if(requestOptions.maxRedirects!=null){this._maxRedirects=Math.max(requestOptions.maxRedirects,0)}if(requestOptions.keepAlive!=null){this._keepAlive=requestOptions.keepAlive}if(requestOptions.allowRetries!=null){this._allowRetries=requestOptions.allowRetries}if(requestOptions.maxRetries!=null){this._maxRetries=requestOptions.maxRetries}}}options(requestUrl,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("OPTIONS",requestUrl,null,additionalHeaders||{})}))}get(requestUrl,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("GET",requestUrl,null,additionalHeaders||{})}))}del(requestUrl,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("DELETE",requestUrl,null,additionalHeaders||{})}))}post(requestUrl,data,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("POST",requestUrl,data,additionalHeaders||{})}))}patch(requestUrl,data,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("PATCH",requestUrl,data,additionalHeaders||{})}))}put(requestUrl,data,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("PUT",requestUrl,data,additionalHeaders||{})}))}head(requestUrl,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request("HEAD",requestUrl,null,additionalHeaders||{})}))}sendStream(verb,requestUrl,stream,additionalHeaders){return __awaiter(this,void 0,void 0,(function*(){return this.request(verb,requestUrl,stream,additionalHeaders)}))}getJson(requestUrl,additionalHeaders={}){return __awaiter(this,void 0,void 0,(function*(){additionalHeaders[Headers.Accept]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.Accept,MediaTypes.ApplicationJson);const res=yield this.get(requestUrl,additionalHeaders);return this._processResponse(res,this.requestOptions)}))}postJson(requestUrl,obj,additionalHeaders={}){return __awaiter(this,void 0,void 0,(function*(){const data=JSON.stringify(obj,null,2);additionalHeaders[Headers.Accept]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.Accept,MediaTypes.ApplicationJson);additionalHeaders[Headers.ContentType]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.ContentType,MediaTypes.ApplicationJson);const res=yield this.post(requestUrl,data,additionalHeaders);return this._processResponse(res,this.requestOptions)}))}putJson(requestUrl,obj,additionalHeaders={}){return __awaiter(this,void 0,void 0,(function*(){const data=JSON.stringify(obj,null,2);additionalHeaders[Headers.Accept]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.Accept,MediaTypes.ApplicationJson);additionalHeaders[Headers.ContentType]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.ContentType,MediaTypes.ApplicationJson);const res=yield this.put(requestUrl,data,additionalHeaders);return this._processResponse(res,this.requestOptions)}))}patchJson(requestUrl,obj,additionalHeaders={}){return __awaiter(this,void 0,void 0,(function*(){const data=JSON.stringify(obj,null,2);additionalHeaders[Headers.Accept]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.Accept,MediaTypes.ApplicationJson);additionalHeaders[Headers.ContentType]=this._getExistingOrDefaultHeader(additionalHeaders,Headers.ContentType,MediaTypes.ApplicationJson);const res=yield this.patch(requestUrl,data,additionalHeaders);return this._processResponse(res,this.requestOptions)}))}request(verb,requestUrl,data,headers){return __awaiter(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}const parsedUrl=new URL(requestUrl);let info=this._prepareRequest(verb,parsedUrl,headers);const maxTries=this._allowRetries&&RetryableHttpVerbs.includes(verb)?this._maxRetries+1:1;let numTries=0;let response;do{response=yield this.requestRaw(info,data);if(response&&response.message&&response.message.statusCode===HttpCodes.Unauthorized){let authenticationHandler;for(const handler of this.handlers){if(handler.canHandleAuthentication(response)){authenticationHandler=handler;break}}if(authenticationHandler){return authenticationHandler.handleAuthentication(this,info,data)}else{return response}}let redirectsRemaining=this._maxRedirects;while(response.message.statusCode&&HttpRedirectCodes.includes(response.message.statusCode)&&this._allowRedirects&&redirectsRemaining>0){const redirectUrl=response.message.headers["location"];if(!redirectUrl){break}const parsedRedirectUrl=new URL(redirectUrl);if(parsedUrl.protocol==="https:"&&parsedUrl.protocol!==parsedRedirectUrl.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield response.readBody();if(parsedRedirectUrl.hostname!==parsedUrl.hostname){for(const header in headers){if(header.toLowerCase()==="authorization"){delete headers[header]}}}info=this._prepareRequest(verb,parsedRedirectUrl,headers);response=yield this.requestRaw(info,data);redirectsRemaining--}if(!response.message.statusCode||!HttpResponseRetryCodes.includes(response.message.statusCode)){return response}numTries+=1;if(numTries<maxTries){yield response.readBody();yield this._performExponentialBackoff(numTries)}}while(numTries<maxTries);return response}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(info,data){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((resolve,reject)=>{function callbackForResult(err,res){if(err){reject(err)}else if(!res){reject(new Error("Unknown error"))}else{resolve(res)}}this.requestRawWithCallback(info,data,callbackForResult)}))}))}requestRawWithCallback(info,data,onResult){if(typeof data==="string"){if(!info.options.headers){info.options.headers={}}info.options.headers["Content-Length"]=Buffer.byteLength(data,"utf8")}let callbackCalled=false;function handleResult(err,res){if(!callbackCalled){callbackCalled=true;onResult(err,res)}}const req=info.httpModule.request(info.options,(msg=>{const res=new HttpClientResponse(msg);handleResult(undefined,res)}));let socket;req.on("socket",(sock=>{socket=sock}));req.setTimeout(this._socketTimeout||3*6e4,(()=>{if(socket){socket.end()}handleResult(new Error(`Request timeout: ${info.options.path}`))}));req.on("error",(function(err){handleResult(err)}));if(data&&typeof data==="string"){req.write(data,"utf8")}if(data&&typeof data!=="string"){data.on("close",(function(){req.end()}));data.pipe(req)}else{req.end()}}getAgent(serverUrl){const parsedUrl=new URL(serverUrl);return this._getAgent(parsedUrl)}_prepareRequest(method,requestUrl,headers){const info={};info.parsedUrl=requestUrl;const usingSsl=info.parsedUrl.protocol==="https:";info.httpModule=usingSsl?https:http;const defaultPort=usingSsl?443:80;info.options={};info.options.host=info.parsedUrl.hostname;info.options.port=info.parsedUrl.port?parseInt(info.parsedUrl.port):defaultPort;info.options.path=(info.parsedUrl.pathname||"")+(info.parsedUrl.search||"");info.options.method=method;info.options.headers=this._mergeHeaders(headers);if(this.userAgent!=null){info.options.headers["user-agent"]=this.userAgent}info.options.agent=this._getAgent(info.parsedUrl);if(this.handlers){for(const handler of this.handlers){handler.prepareRequest(info.options)}}return info}_mergeHeaders(headers){if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(headers||{}))}return lowercaseKeys(headers||{})}_getExistingOrDefaultHeader(additionalHeaders,header,_default){let clientHeader;if(this.requestOptions&&this.requestOptions.headers){clientHeader=lowercaseKeys(this.requestOptions.headers)[header]}return additionalHeaders[header]||clientHeader||_default}_getAgent(parsedUrl){let agent;const proxyUrl=pm.getProxyUrl(parsedUrl);const useProxy=proxyUrl&&proxyUrl.hostname;if(this._keepAlive&&useProxy){agent=this._proxyAgent}if(this._keepAlive&&!useProxy){agent=this._agent}if(agent){return agent}const usingSsl=parsedUrl.protocol==="https:";let maxSockets=100;if(this.requestOptions){maxSockets=this.requestOptions.maxSockets||http.globalAgent.maxSockets}if(proxyUrl&&proxyUrl.hostname){const agentOptions={maxSockets,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(proxyUrl.username||proxyUrl.password)&&{proxyAuth:`${proxyUrl.username}:${proxyUrl.password}`}),{host:proxyUrl.hostname,port:proxyUrl.port})};let tunnelAgent;const overHttps=proxyUrl.protocol==="https:";if(usingSsl){tunnelAgent=overHttps?tunnel.httpsOverHttps:tunnel.httpsOverHttp}else{tunnelAgent=overHttps?tunnel.httpOverHttps:tunnel.httpOverHttp}agent=tunnelAgent(agentOptions);this._proxyAgent=agent}if(this._keepAlive&&!agent){const options={keepAlive:this._keepAlive,maxSockets};agent=usingSsl?new https.Agent(options):new http.Agent(options);this._agent=agent}if(!agent){agent=usingSsl?https.globalAgent:http.globalAgent}if(usingSsl&&this._ignoreSslError){agent.options=Object.assign(agent.options||{},{rejectUnauthorized:false})}return agent}_performExponentialBackoff(retryNumber){return __awaiter(this,void 0,void 0,(function*(){retryNumber=Math.min(ExponentialBackoffCeiling,retryNumber);const ms=ExponentialBackoffTimeSlice*Math.pow(2,retryNumber);return new Promise((resolve=>setTimeout((()=>resolve()),ms)))}))}_processResponse(res,options){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){const statusCode=res.message.statusCode||0;const response={statusCode,result:null,headers:{}};if(statusCode===HttpCodes.NotFound){resolve(response)}function dateTimeDeserializer(key,value){if(typeof value==="string"){const a=new Date(value);if(!isNaN(a.valueOf())){return a}}return value}let obj;let contents;try{contents=yield res.readBody();if(contents&&contents.length>0){if(options&&options.deserializeDates){obj=JSON.parse(contents,dateTimeDeserializer)}else{obj=JSON.parse(contents)}response.result=obj}response.headers=res.message.headers}catch(err){}if(statusCode>299){let msg;if(obj&&obj.message){msg=obj.message}else if(contents&&contents.length>0){msg=contents}else{msg=`Failed request: (${statusCode})`}const err=new HttpClientError(msg,statusCode);err.result=response.result;reject(err)}else{resolve(response)}}))))}))}}exports.HttpClient=HttpClient;const lowercaseKeys=obj=>Object.keys(obj).reduce(((c,k)=>(c[k.toLowerCase()]=obj[k],c)),{})},960:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkBypass=exports.getProxyUrl=void 0;function getProxyUrl(reqUrl){const usingSsl=reqUrl.protocol==="https:";if(checkBypass(reqUrl)){return undefined}const proxyVar=(()=>{if(usingSsl){return process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{return process.env["http_proxy"]||process.env["HTTP_PROXY"]}})();if(proxyVar){return new URL(proxyVar)}else{return undefined}}exports.getProxyUrl=getProxyUrl;function checkBypass(reqUrl){if(!reqUrl.hostname){return false}const noProxy=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!noProxy){return false}let reqPort;if(reqUrl.port){reqPort=Number(reqUrl.port)}else if(reqUrl.protocol==="http:"){reqPort=80}else if(reqUrl.protocol==="https:"){reqPort=443}const upperReqHosts=[reqUrl.hostname.toUpperCase()];if(typeof reqPort==="number"){upperReqHosts.push(`${upperReqHosts[0]}:${reqPort}`)}for(const upperNoProxyItem of noProxy.split(",").map((x=>x.trim().toUpperCase())).filter((x=>x))){if(upperReqHosts.some((x=>x===upperNoProxyItem))){return true}}return false}exports.checkBypass=checkBypass},564:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var _a;Object.defineProperty(exports,"__esModule",{value:true});exports.getCmdPath=exports.tryGetExecutablePath=exports.isRooted=exports.isDirectory=exports.exists=exports.IS_WINDOWS=exports.unlink=exports.symlink=exports.stat=exports.rmdir=exports.rename=exports.readlink=exports.readdir=exports.mkdir=exports.lstat=exports.copyFile=exports.chmod=void 0;const fs=__importStar(__webpack_require__(147));const path=__importStar(__webpack_require__(17));_a=fs.promises,exports.chmod=_a.chmod,exports.copyFile=_a.copyFile,exports.lstat=_a.lstat,exports.mkdir=_a.mkdir,exports.readdir=_a.readdir,exports.readlink=_a.readlink,exports.rename=_a.rename,exports.rmdir=_a.rmdir,exports.stat=_a.stat,exports.symlink=_a.symlink,exports.unlink=_a.unlink;exports.IS_WINDOWS=process.platform==="win32";function exists(fsPath){return __awaiter(this,void 0,void 0,(function*(){try{yield exports.stat(fsPath)}catch(err){if(err.code==="ENOENT"){return false}throw err}return true}))}exports.exists=exists;function isDirectory(fsPath,useStat=false){return __awaiter(this,void 0,void 0,(function*(){const stats=useStat?yield exports.stat(fsPath):yield exports.lstat(fsPath);return stats.isDirectory()}))}exports.isDirectory=isDirectory;function isRooted(p){p=normalizeSeparators(p);if(!p){throw new Error('isRooted() parameter "p" cannot be empty')}if(exports.IS_WINDOWS){return p.startsWith("\\")||/^[A-Z]:/i.test(p)}return p.startsWith("/")}exports.isRooted=isRooted;function tryGetExecutablePath(filePath,extensions){return __awaiter(this,void 0,void 0,(function*(){let stats=undefined;try{stats=yield exports.stat(filePath)}catch(err){if(err.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${filePath}': ${err}`)}}if(stats&&stats.isFile()){if(exports.IS_WINDOWS){const upperExt=path.extname(filePath).toUpperCase();if(extensions.some((validExt=>validExt.toUpperCase()===upperExt))){return filePath}}else{if(isUnixExecutable(stats)){return filePath}}}const originalFilePath=filePath;for(const extension of extensions){filePath=originalFilePath+extension;stats=undefined;try{stats=yield exports.stat(filePath)}catch(err){if(err.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${filePath}': ${err}`)}}if(stats&&stats.isFile()){if(exports.IS_WINDOWS){try{const directory=path.dirname(filePath);const upperName=path.basename(filePath).toUpperCase();for(const actualName of yield exports.readdir(directory)){if(upperName===actualName.toUpperCase()){filePath=path.join(directory,actualName);break}}}catch(err){console.log(`Unexpected error attempting to determine the actual case of the file '${filePath}': ${err}`)}return filePath}else{if(isUnixExecutable(stats)){return filePath}}}}return""}))}exports.tryGetExecutablePath=tryGetExecutablePath;function normalizeSeparators(p){p=p||"";if(exports.IS_WINDOWS){p=p.replace(/\//g,"\\");return p.replace(/\\\\+/g,"\\")}return p.replace(/\/\/+/g,"/")}function isUnixExecutable(stats){return(stats.mode&1)>0||(stats.mode&8)>0&&stats.gid===process.getgid()||(stats.mode&64)>0&&stats.uid===process.getuid()}function getCmdPath(){var _a;return(_a=process.env["COMSPEC"])!==null&&_a!==void 0?_a:`cmd.exe`}exports.getCmdPath=getCmdPath},484:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.findInPath=exports.which=exports.mkdirP=exports.rmRF=exports.mv=exports.cp=void 0;const assert_1=__webpack_require__(491);const childProcess=__importStar(__webpack_require__(81));const path=__importStar(__webpack_require__(17));const util_1=__webpack_require__(837);const ioUtil=__importStar(__webpack_require__(564));const exec=util_1.promisify(childProcess.exec);const execFile=util_1.promisify(childProcess.execFile);function cp(source,dest,options={}){return __awaiter(this,void 0,void 0,(function*(){const{force,recursive,copySourceDirectory}=readCopyOptions(options);const destStat=(yield ioUtil.exists(dest))?yield ioUtil.stat(dest):null;if(destStat&&destStat.isFile()&&!force){return}const newDest=destStat&&destStat.isDirectory()&&copySourceDirectory?path.join(dest,path.basename(source)):dest;if(!(yield ioUtil.exists(source))){throw new Error(`no such file or directory: ${source}`)}const sourceStat=yield ioUtil.stat(source);if(sourceStat.isDirectory()){if(!recursive){throw new Error(`Failed to copy. ${source} is a directory, but tried to copy without recursive flag.`)}else{yield cpDirRecursive(source,newDest,0,force)}}else{if(path.relative(source,newDest)===""){throw new Error(`'${newDest}' and '${source}' are the same file`)}yield copyFile(source,newDest,force)}}))}exports.cp=cp;function mv(source,dest,options={}){return __awaiter(this,void 0,void 0,(function*(){if(yield ioUtil.exists(dest)){let destExists=true;if(yield ioUtil.isDirectory(dest)){dest=path.join(dest,path.basename(source));destExists=yield ioUtil.exists(dest)}if(destExists){if(options.force==null||options.force){yield rmRF(dest)}else{throw new Error("Destination already exists")}}}yield mkdirP(path.dirname(dest));yield ioUtil.rename(source,dest)}))}exports.mv=mv;function rmRF(inputPath){return __awaiter(this,void 0,void 0,(function*(){if(ioUtil.IS_WINDOWS){if(/[*"<>|]/.test(inputPath)){throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows')}try{const cmdPath=ioUtil.getCmdPath();if(yield ioUtil.isDirectory(inputPath,true)){yield exec(`${cmdPath} /s /c "rd /s /q "%inputPath%""`,{env:{inputPath}})}else{yield exec(`${cmdPath} /s /c "del /f /a "%inputPath%""`,{env:{inputPath}})}}catch(err){if(err.code!=="ENOENT")throw err}try{yield ioUtil.unlink(inputPath)}catch(err){if(err.code!=="ENOENT")throw err}}else{let isDir=false;try{isDir=yield ioUtil.isDirectory(inputPath)}catch(err){if(err.code!=="ENOENT")throw err;return}if(isDir){yield execFile(`rm`,[`-rf`,`${inputPath}`])}else{yield ioUtil.unlink(inputPath)}}}))}exports.rmRF=rmRF;function mkdirP(fsPath){return __awaiter(this,void 0,void 0,(function*(){assert_1.ok(fsPath,"a path argument must be provided");yield ioUtil.mkdir(fsPath,{recursive:true})}))}exports.mkdirP=mkdirP;function which(tool,check){return __awaiter(this,void 0,void 0,(function*(){if(!tool){throw new Error("parameter 'tool' is required")}if(check){const result=yield which(tool,false);if(!result){if(ioUtil.IS_WINDOWS){throw new Error(`Unable to locate executable file: ${tool}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`)}else{throw new Error(`Unable to locate executable file: ${tool}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}}return result}const matches=yield findInPath(tool);if(matches&&matches.length>0){return matches[0]}return""}))}exports.which=which;function findInPath(tool){return __awaiter(this,void 0,void 0,(function*(){if(!tool){throw new Error("parameter 'tool' is required")}const extensions=[];if(ioUtil.IS_WINDOWS&&process.env["PATHEXT"]){for(const extension of process.env["PATHEXT"].split(path.delimiter)){if(extension){extensions.push(extension)}}}if(ioUtil.isRooted(tool)){const filePath=yield ioUtil.tryGetExecutablePath(tool,extensions);if(filePath){return[filePath]}return[]}if(tool.includes(path.sep)){return[]}const directories=[];if(process.env.PATH){for(const p of process.env.PATH.split(path.delimiter)){if(p){directories.push(p)}}}const matches=[];for(const directory of directories){const filePath=yield ioUtil.tryGetExecutablePath(path.join(directory,tool),extensions);if(filePath){matches.push(filePath)}}return matches}))}exports.findInPath=findInPath;function readCopyOptions(options){const force=options.force==null?true:options.force;const recursive=Boolean(options.recursive);const copySourceDirectory=options.copySourceDirectory==null?true:Boolean(options.copySourceDirectory);return{force,recursive,copySourceDirectory}}function cpDirRecursive(sourceDir,destDir,currentDepth,force){return __awaiter(this,void 0,void 0,(function*(){if(currentDepth>=255)return;currentDepth++;yield mkdirP(destDir);const files=yield ioUtil.readdir(sourceDir);for(const fileName of files){const srcFile=`${sourceDir}/${fileName}`;const destFile=`${destDir}/${fileName}`;const srcFileStat=yield ioUtil.lstat(srcFile);if(srcFileStat.isDirectory()){yield cpDirRecursive(srcFile,destFile,currentDepth,force)}else{yield copyFile(srcFile,destFile,force)}}yield ioUtil.chmod(destDir,(yield ioUtil.stat(sourceDir)).mode)}))}function copyFile(srcFile,destFile,force){return __awaiter(this,void 0,void 0,(function*(){if((yield ioUtil.lstat(srcFile)).isSymbolicLink()){try{yield ioUtil.lstat(destFile);yield ioUtil.unlink(destFile)}catch(e){if(e.code==="EPERM"){yield ioUtil.chmod(destFile,"0666");yield ioUtil.unlink(destFile)}}const symlinkFull=yield ioUtil.readlink(srcFile);yield ioUtil.symlink(symlinkFull,destFile,ioUtil.IS_WINDOWS?"junction":null)}else if(!(yield ioUtil.exists(destFile))||force){yield ioUtil.copyFile(srcFile,destFile)}}))}},29:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports._readLinuxVersionFile=exports._getOsVersion=exports._findMatch=void 0;const semver=__importStar(__webpack_require__(625));const core_1=__webpack_require__(225);const os=__webpack_require__(37);const cp=__webpack_require__(81);const fs=__webpack_require__(147);function _findMatch(versionSpec,stable,candidates,archFilter){return __awaiter(this,void 0,void 0,(function*(){const platFilter=os.platform();let result;let match;let file;for(const candidate of candidates){const version=candidate.version;core_1.debug(`check ${version} satisfies ${versionSpec}`);if(semver.satisfies(version,versionSpec)&&(!stable||candidate.stable===stable)){file=candidate.files.find((item=>{core_1.debug(`${item.arch}===${archFilter} && ${item.platform}===${platFilter}`);let chk=item.arch===archFilter&&item.platform===platFilter;if(chk&&item.platform_version){const osVersion=module.exports._getOsVersion();if(osVersion===item.platform_version){chk=true}else{chk=semver.satisfies(osVersion,item.platform_version)}}return chk}));if(file){core_1.debug(`matched ${candidate.version}`);match=candidate;break}}}if(match&&file){result=Object.assign({},match);result.files=[file]}return result}))}exports._findMatch=_findMatch;function _getOsVersion(){const plat=os.platform();let version="";if(plat==="darwin"){version=cp.execSync("sw_vers -productVersion").toString()}else if(plat==="linux"){const lsbContents=module.exports._readLinuxVersionFile();if(lsbContents){const lines=lsbContents.split("\n");for(const line of lines){const parts=line.split("=");if(parts.length===2&&(parts[0].trim()==="VERSION_ID"||parts[0].trim()==="DISTRIB_RELEASE")){version=parts[1].trim().replace(/^"/,"").replace(/"$/,"");break}}}}return version}exports._getOsVersion=_getOsVersion;function _readLinuxVersionFile(){const lsbReleaseFile="/etc/lsb-release";const osReleaseFile="/etc/os-release";let contents="";if(fs.existsSync(lsbReleaseFile)){contents=fs.readFileSync(lsbReleaseFile).toString()}else if(fs.existsSync(osReleaseFile)){contents=fs.readFileSync(osReleaseFile).toString()}return contents}exports._readLinuxVersionFile=_readLinuxVersionFile},804:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.RetryHelper=void 0;const core=__importStar(__webpack_require__(225));class RetryHelper{constructor(maxAttempts,minSeconds,maxSeconds){if(maxAttempts<1){throw new Error("max attempts should be greater than or equal to 1")}this.maxAttempts=maxAttempts;this.minSeconds=Math.floor(minSeconds);this.maxSeconds=Math.floor(maxSeconds);if(this.minSeconds>this.maxSeconds){throw new Error("min seconds should be less than or equal to max seconds")}}execute(action,isRetryable){return __awaiter(this,void 0,void 0,(function*(){let attempt=1;while(attempt<this.maxAttempts){try{return yield action()}catch(err){if(isRetryable&&!isRetryable(err)){throw err}core.info(err.message)}const seconds=this.getSleepAmount();core.info(`Waiting ${seconds} seconds before trying again`);yield this.sleep(seconds);attempt++}return yield action()}))}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(seconds){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve=>setTimeout(resolve,seconds*1e3)))}))}}exports.RetryHelper=RetryHelper},392:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.evaluateVersions=exports.isExplicitVersion=exports.findFromManifest=exports.getManifestFromRepo=exports.findAllVersions=exports.find=exports.cacheFile=exports.cacheDir=exports.extractZip=exports.extractXar=exports.extractTar=exports.extract7z=exports.downloadTool=exports.HTTPError=void 0;const core=__importStar(__webpack_require__(225));const io=__importStar(__webpack_require__(484));const fs=__importStar(__webpack_require__(147));const mm=__importStar(__webpack_require__(29));const os=__importStar(__webpack_require__(37));const path=__importStar(__webpack_require__(17));const httpm=__importStar(__webpack_require__(635));const semver=__importStar(__webpack_require__(625));const stream=__importStar(__webpack_require__(781));const util=__importStar(__webpack_require__(837));const assert_1=__webpack_require__(491);const v4_1=__importDefault(__webpack_require__(358));const exec_1=__webpack_require__(27);const retry_helper_1=__webpack_require__(804);class HTTPError extends Error{constructor(httpStatusCode){super(`Unexpected HTTP response: ${httpStatusCode}`);this.httpStatusCode=httpStatusCode;Object.setPrototypeOf(this,new.target.prototype)}}exports.HTTPError=HTTPError;const IS_WINDOWS=process.platform==="win32";const IS_MAC=process.platform==="darwin";const userAgent="actions/tool-cache";function downloadTool(url,dest,auth,headers){return __awaiter(this,void 0,void 0,(function*(){dest=dest||path.join(_getTempDirectory(),v4_1.default());yield io.mkdirP(path.dirname(dest));core.debug(`Downloading ${url}`);core.debug(`Destination ${dest}`);const maxAttempts=3;const minSeconds=_getGlobal("TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS",10);const maxSeconds=_getGlobal("TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS",20);const retryHelper=new retry_helper_1.RetryHelper(maxAttempts,minSeconds,maxSeconds);return yield retryHelper.execute((()=>__awaiter(this,void 0,void 0,(function*(){return yield downloadToolAttempt(url,dest||"",auth,headers)}))),(err=>{if(err instanceof HTTPError&&err.httpStatusCode){if(err.httpStatusCode<500&&err.httpStatusCode!==408&&err.httpStatusCode!==429){return false}}return true}))}))}exports.downloadTool=downloadTool;function downloadToolAttempt(url,dest,auth,headers){return __awaiter(this,void 0,void 0,(function*(){if(fs.existsSync(dest)){throw new Error(`Destination file path ${dest} already exists`)}const http=new httpm.HttpClient(userAgent,[],{allowRetries:false});if(auth){core.debug("set auth");if(headers===undefined){headers={}}headers.authorization=auth}const response=yield http.get(url,headers);if(response.message.statusCode!==200){const err=new HTTPError(response.message.statusCode);core.debug(`Failed to download from "${url}". Code(${response.message.statusCode}) Message(${response.message.statusMessage})`);throw err}const pipeline=util.promisify(stream.pipeline);const responseMessageFactory=_getGlobal("TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY",(()=>response.message));const readStream=responseMessageFactory();let succeeded=false;try{yield pipeline(readStream,fs.createWriteStream(dest));core.debug("download complete");succeeded=true;return dest}finally{if(!succeeded){core.debug("download failed");try{yield io.rmRF(dest)}catch(err){core.debug(`Failed to delete '${dest}'. ${err.message}`)}}}}))}function extract7z(file,dest,_7zPath){return __awaiter(this,void 0,void 0,(function*(){assert_1.ok(IS_WINDOWS,"extract7z() not supported on current OS");assert_1.ok(file,'parameter "file" is required');dest=yield _createExtractFolder(dest);const originalCwd=process.cwd();process.chdir(dest);if(_7zPath){try{const logLevel=core.isDebug()?"-bb1":"-bb0";const args=["x",logLevel,"-bd","-sccUTF-8",file];const options={silent:true};yield exec_1.exec(`"${_7zPath}"`,args,options)}finally{process.chdir(originalCwd)}}else{const escapedScript=path.join(__dirname,"..","scripts","Invoke-7zdec.ps1").replace(/'/g,"''").replace(/"|\n|\r/g,"");const escapedFile=file.replace(/'/g,"''").replace(/"|\n|\r/g,"");const escapedTarget=dest.replace(/'/g,"''").replace(/"|\n|\r/g,"");const command=`& '${escapedScript}' -Source '${escapedFile}' -Target '${escapedTarget}'`;const args=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",command];const options={silent:true};try{const powershellPath=yield io.which("powershell",true);yield exec_1.exec(`"${powershellPath}"`,args,options)}finally{process.chdir(originalCwd)}}return dest}))}exports.extract7z=extract7z;function extractTar(file,dest,flags="xz"){return __awaiter(this,void 0,void 0,(function*(){if(!file){throw new Error("parameter 'file' is required")}dest=yield _createExtractFolder(dest);core.debug("Checking tar --version");let versionOutput="";yield exec_1.exec("tar --version",[],{ignoreReturnCode:true,silent:true,listeners:{stdout:data=>versionOutput+=data.toString(),stderr:data=>versionOutput+=data.toString()}});core.debug(versionOutput.trim());const isGnuTar=versionOutput.toUpperCase().includes("GNU TAR");let args;if(flags instanceof Array){args=flags}else{args=[flags]}if(core.isDebug()&&!flags.includes("v")){args.push("-v")}let destArg=dest;let fileArg=file;if(IS_WINDOWS&&isGnuTar){args.push("--force-local");destArg=dest.replace(/\\/g,"/");fileArg=file.replace(/\\/g,"/")}if(isGnuTar){args.push("--warning=no-unknown-keyword");args.push("--overwrite")}args.push("-C",destArg,"-f",fileArg);yield exec_1.exec(`tar`,args);return dest}))}exports.extractTar=extractTar;function extractXar(file,dest,flags=[]){return __awaiter(this,void 0,void 0,(function*(){assert_1.ok(IS_MAC,"extractXar() not supported on current OS");assert_1.ok(file,'parameter "file" is required');dest=yield _createExtractFolder(dest);let args;if(flags instanceof Array){args=flags}else{args=[flags]}args.push("-x","-C",dest,"-f",file);if(core.isDebug()){args.push("-v")}const xarPath=yield io.which("xar",true);yield exec_1.exec(`"${xarPath}"`,_unique(args));return dest}))}exports.extractXar=extractXar;function extractZip(file,dest){return __awaiter(this,void 0,void 0,(function*(){if(!file){throw new Error("parameter 'file' is required")}dest=yield _createExtractFolder(dest);if(IS_WINDOWS){yield extractZipWin(file,dest)}else{yield extractZipNix(file,dest)}return dest}))}exports.extractZip=extractZip;function extractZipWin(file,dest){return __awaiter(this,void 0,void 0,(function*(){const escapedFile=file.replace(/'/g,"''").replace(/"|\n|\r/g,"");const escapedDest=dest.replace(/'/g,"''").replace(/"|\n|\r/g,"");const pwshPath=yield io.which("pwsh",false);if(pwshPath){const pwshCommand=[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;`,`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${escapedFile}', '${escapedDest}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${escapedFile}' -DestinationPath '${escapedDest}' -Force } else { throw $_ } } ;`].join(" ");const args=["-NoLogo","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",pwshCommand];core.debug(`Using pwsh at path: ${pwshPath}`);yield exec_1.exec(`"${pwshPath}"`,args)}else{const powershellCommand=[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;`,`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${escapedFile}' -DestinationPath '${escapedDest}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${escapedFile}', '${escapedDest}', $true) }`].join(" ");const args=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",powershellCommand];const powershellPath=yield io.which("powershell",true);core.debug(`Using powershell at path: ${powershellPath}`);yield exec_1.exec(`"${powershellPath}"`,args)}}))}function extractZipNix(file,dest){return __awaiter(this,void 0,void 0,(function*(){const unzipPath=yield io.which("unzip",true);const args=[file];if(!core.isDebug()){args.unshift("-q")}args.unshift("-o");yield exec_1.exec(`"${unzipPath}"`,args,{cwd:dest})}))}function cacheDir(sourceDir,tool,version,arch){return __awaiter(this,void 0,void 0,(function*(){version=semver.clean(version)||version;arch=arch||os.arch();core.debug(`Caching tool ${tool} ${version} ${arch}`);core.debug(`source dir: ${sourceDir}`);if(!fs.statSync(sourceDir).isDirectory()){throw new Error("sourceDir is not a directory")}const destPath=yield _createToolPath(tool,version,arch);for(const itemName of fs.readdirSync(sourceDir)){const s=path.join(sourceDir,itemName);yield io.cp(s,destPath,{recursive:true})}_completeToolPath(tool,version,arch);return destPath}))}exports.cacheDir=cacheDir;function cacheFile(sourceFile,targetFile,tool,version,arch){return __awaiter(this,void 0,void 0,(function*(){version=semver.clean(version)||version;arch=arch||os.arch();core.debug(`Caching tool ${tool} ${version} ${arch}`);core.debug(`source file: ${sourceFile}`);if(!fs.statSync(sourceFile).isFile()){throw new Error("sourceFile is not a file")}const destFolder=yield _createToolPath(tool,version,arch);const destPath=path.join(destFolder,targetFile);core.debug(`destination file ${destPath}`);yield io.cp(sourceFile,destPath);_completeToolPath(tool,version,arch);return destFolder}))}exports.cacheFile=cacheFile;function find(toolName,versionSpec,arch){if(!toolName){throw new Error("toolName parameter is required")}if(!versionSpec){throw new Error("versionSpec parameter is required")}arch=arch||os.arch();if(!isExplicitVersion(versionSpec)){const localVersions=findAllVersions(toolName,arch);const match=evaluateVersions(localVersions,versionSpec);versionSpec=match}let toolPath="";if(versionSpec){versionSpec=semver.clean(versionSpec)||"";const cachePath=path.join(_getCacheDirectory(),toolName,versionSpec,arch);core.debug(`checking cache: ${cachePath}`);if(fs.existsSync(cachePath)&&fs.existsSync(`${cachePath}.complete`)){core.debug(`Found tool in cache ${toolName} ${versionSpec} ${arch}`);toolPath=cachePath}else{core.debug("not found")}}return toolPath}exports.find=find;function findAllVersions(toolName,arch){const versions=[];arch=arch||os.arch();const toolPath=path.join(_getCacheDirectory(),toolName);if(fs.existsSync(toolPath)){const children=fs.readdirSync(toolPath);for(const child of children){if(isExplicitVersion(child)){const fullPath=path.join(toolPath,child,arch||"");if(fs.existsSync(fullPath)&&fs.existsSync(`${fullPath}.complete`)){versions.push(child)}}}}return versions}exports.findAllVersions=findAllVersions;function getManifestFromRepo(owner,repo,auth,branch="master"){return __awaiter(this,void 0,void 0,(function*(){let releases=[];const treeUrl=`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}`;const http=new httpm.HttpClient("tool-cache");const headers={};if(auth){core.debug("set auth");headers.authorization=auth}const response=yield http.getJson(treeUrl,headers);if(!response.result){return releases}let manifestUrl="";for(const item of response.result.tree){if(item.path==="versions-manifest.json"){manifestUrl=item.url;break}}headers["accept"]="application/vnd.github.VERSION.raw";let versionsRaw=yield(yield http.get(manifestUrl,headers)).readBody();if(versionsRaw){versionsRaw=versionsRaw.replace(/^\uFEFF/,"");try{releases=JSON.parse(versionsRaw)}catch(_a){core.debug("Invalid json")}}return releases}))}exports.getManifestFromRepo=getManifestFromRepo;function findFromManifest(versionSpec,stable,manifest,archFilter=os.arch()){return __awaiter(this,void 0,void 0,(function*(){const match=yield mm._findMatch(versionSpec,stable,manifest,archFilter);return match}))}exports.findFromManifest=findFromManifest;function _createExtractFolder(dest){return __awaiter(this,void 0,void 0,(function*(){if(!dest){dest=path.join(_getTempDirectory(),v4_1.default())}yield io.mkdirP(dest);return dest}))}function _createToolPath(tool,version,arch){return __awaiter(this,void 0,void 0,(function*(){const folderPath=path.join(_getCacheDirectory(),tool,semver.clean(version)||version,arch||"");core.debug(`destination ${folderPath}`);const markerPath=`${folderPath}.complete`;yield io.rmRF(folderPath);yield io.rmRF(markerPath);yield io.mkdirP(folderPath);return folderPath}))}function _completeToolPath(tool,version,arch){const folderPath=path.join(_getCacheDirectory(),tool,semver.clean(version)||version,arch||"");const markerPath=`${folderPath}.complete`;fs.writeFileSync(markerPath,"");core.debug("finished caching tool")}function isExplicitVersion(versionSpec){const c=semver.clean(versionSpec)||"";core.debug(`isExplicit: ${c}`);const valid=semver.valid(c)!=null;core.debug(`explicit? ${valid}`);return valid}exports.isExplicitVersion=isExplicitVersion;function evaluateVersions(versions,versionSpec){let version="";core.debug(`evaluating ${versions.length} versions`);versions=versions.sort(((a,b)=>{if(semver.gt(a,b)){return 1}return-1}));for(let i=versions.length-1;i>=0;i--){const potential=versions[i];const satisfied=semver.satisfies(potential,versionSpec);if(satisfied){version=potential;break}}if(version){core.debug(`matched: ${version}`)}else{core.debug("match not found")}return version}exports.evaluateVersions=evaluateVersions;function _getCacheDirectory(){const cacheDirectory=process.env["RUNNER_TOOL_CACHE"]||"";assert_1.ok(cacheDirectory,"Expected RUNNER_TOOL_CACHE to be defined");return cacheDirectory}function _getTempDirectory(){const tempDirectory=process.env["RUNNER_TEMP"]||"";assert_1.ok(tempDirectory,"Expected RUNNER_TEMP to be defined");return tempDirectory}function _getGlobal(key,defaultValue){const value=global[key];return value!==undefined?value:defaultValue}function _unique(values){return Array.from(new Set(values))}},874:(module,__unused_webpack_exports,__webpack_require__)=>{const crypto=__webpack_require__(113);const fs=__webpack_require__(147);const BUFFER_SIZE=8192;function md5FileSync(path){const fd=fs.openSync(path,"r");const hash=crypto.createHash("md5");const buffer=Buffer.alloc(BUFFER_SIZE);try{let bytesRead;do{bytesRead=fs.readSync(fd,buffer,0,BUFFER_SIZE);hash.update(buffer.slice(0,bytesRead))}while(bytesRead===BUFFER_SIZE)}finally{fs.closeSync(fd)}return hash.digest("hex")}function md5File(path){return new Promise(((resolve,reject)=>{const output=crypto.createHash("md5");const input=fs.createReadStream(path);input.on("error",(err=>{reject(err)}));output.once("readable",(()=>{resolve(output.read().toString("hex"))}));input.pipe(output)}))}module.exports=md5File;module.exports.sync=md5FileSync},625:(module,exports)=>{exports=module.exports=SemVer;var debug;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){debug=function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER");console.log.apply(console,args)}}else{debug=function(){}}exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MAX_SAFE_COMPONENT_LENGTH=16;var re=exports.re=[];var src=exports.src=[];var t=exports.tokens={};var R=0;function tok(n){t[n]=R++}tok("NUMERICIDENTIFIER");src[t.NUMERICIDENTIFIER]="0|[1-9]\\d*";tok("NUMERICIDENTIFIERLOOSE");src[t.NUMERICIDENTIFIERLOOSE]="[0-9]+";tok("NONNUMERICIDENTIFIER");src[t.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";tok("MAINVERSION");src[t.MAINVERSION]="("+src[t.NUMERICIDENTIFIER]+")\\."+"("+src[t.NUMERICIDENTIFIER]+")\\."+"("+src[t.NUMERICIDENTIFIER]+")";tok("MAINVERSIONLOOSE");src[t.MAINVERSIONLOOSE]="("+src[t.NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[t.NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[t.NUMERICIDENTIFIERLOOSE]+")";tok("PRERELEASEIDENTIFIER");src[t.PRERELEASEIDENTIFIER]="(?:"+src[t.NUMERICIDENTIFIER]+"|"+src[t.NONNUMERICIDENTIFIER]+")";tok("PRERELEASEIDENTIFIERLOOSE");src[t.PRERELEASEIDENTIFIERLOOSE]="(?:"+src[t.NUMERICIDENTIFIERLOOSE]+"|"+src[t.NONNUMERICIDENTIFIER]+")";tok("PRERELEASE");src[t.PRERELEASE]="(?:-("+src[t.PRERELEASEIDENTIFIER]+"(?:\\."+src[t.PRERELEASEIDENTIFIER]+")*))";tok("PRERELEASELOOSE");src[t.PRERELEASELOOSE]="(?:-?("+src[t.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[t.PRERELEASEIDENTIFIERLOOSE]+")*))";tok("BUILDIDENTIFIER");src[t.BUILDIDENTIFIER]="[0-9A-Za-z-]+";tok("BUILD");src[t.BUILD]="(?:\\+("+src[t.BUILDIDENTIFIER]+"(?:\\."+src[t.BUILDIDENTIFIER]+")*))";tok("FULL");tok("FULLPLAIN");src[t.FULLPLAIN]="v?"+src[t.MAINVERSION]+src[t.PRERELEASE]+"?"+src[t.BUILD]+"?";src[t.FULL]="^"+src[t.FULLPLAIN]+"$";tok("LOOSEPLAIN");src[t.LOOSEPLAIN]="[v=\\s]*"+src[t.MAINVERSIONLOOSE]+src[t.PRERELEASELOOSE]+"?"+src[t.BUILD]+"?";tok("LOOSE");src[t.LOOSE]="^"+src[t.LOOSEPLAIN]+"$";tok("GTLT");src[t.GTLT]="((?:<|>)?=?)";tok("XRANGEIDENTIFIERLOOSE");src[t.XRANGEIDENTIFIERLOOSE]=src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";tok("XRANGEIDENTIFIER");src[t.XRANGEIDENTIFIER]=src[t.NUMERICIDENTIFIER]+"|x|X|\\*";tok("XRANGEPLAIN");src[t.XRANGEPLAIN]="[v=\\s]*("+src[t.XRANGEIDENTIFIER]+")"+"(?:\\.("+src[t.XRANGEIDENTIFIER]+")"+"(?:\\.("+src[t.XRANGEIDENTIFIER]+")"+"(?:"+src[t.PRERELEASE]+")?"+src[t.BUILD]+"?"+")?)?";tok("XRANGEPLAINLOOSE");src[t.XRANGEPLAINLOOSE]="[v=\\s]*("+src[t.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+src[t.PRERELEASELOOSE]+")?"+src[t.BUILD]+"?"+")?)?";tok("XRANGE");src[t.XRANGE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAIN]+"$";tok("XRANGELOOSE");src[t.XRANGELOOSE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAINLOOSE]+"$";tok("COERCE");src[t.COERCE]="(^|[^\\d])"+"(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"})"+"(?:\\.(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"}))?"+"(?:\\.(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"}))?"+"(?:$|[^\\d])";tok("COERCERTL");re[t.COERCERTL]=new RegExp(src[t.COERCE],"g");tok("LONETILDE");src[t.LONETILDE]="(?:~>?)";tok("TILDETRIM");src[t.TILDETRIM]="(\\s*)"+src[t.LONETILDE]+"\\s+";re[t.TILDETRIM]=new RegExp(src[t.TILDETRIM],"g");var tildeTrimReplace="$1~";tok("TILDE");src[t.TILDE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAIN]+"$";tok("TILDELOOSE");src[t.TILDELOOSE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAINLOOSE]+"$";tok("LONECARET");src[t.LONECARET]="(?:\\^)";tok("CARETTRIM");src[t.CARETTRIM]="(\\s*)"+src[t.LONECARET]+"\\s+";re[t.CARETTRIM]=new RegExp(src[t.CARETTRIM],"g");var caretTrimReplace="$1^";tok("CARET");src[t.CARET]="^"+src[t.LONECARET]+src[t.XRANGEPLAIN]+"$";tok("CARETLOOSE");src[t.CARETLOOSE]="^"+src[t.LONECARET]+src[t.XRANGEPLAINLOOSE]+"$";tok("COMPARATORLOOSE");src[t.COMPARATORLOOSE]="^"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+")$|^$";tok("COMPARATOR");src[t.COMPARATOR]="^"+src[t.GTLT]+"\\s*("+src[t.FULLPLAIN]+")$|^$";tok("COMPARATORTRIM");src[t.COMPARATORTRIM]="(\\s*)"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+"|"+src[t.XRANGEPLAIN]+")";re[t.COMPARATORTRIM]=new RegExp(src[t.COMPARATORTRIM],"g");var comparatorTrimReplace="$1$2$3";tok("HYPHENRANGE");src[t.HYPHENRANGE]="^\\s*("+src[t.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+src[t.XRANGEPLAIN]+")"+"\\s*$";tok("HYPHENRANGELOOSE");src[t.HYPHENRANGELOOSE]="^\\s*("+src[t.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+src[t.XRANGEPLAINLOOSE]+")"+"\\s*$";tok("STAR");src[t.STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i]){re[i]=new RegExp(src[i])}}exports.parse=parse;function parse(version,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){return version}if(typeof version!=="string"){return null}if(version.length>MAX_LENGTH){return null}var r=options.loose?re[t.LOOSE]:re[t.FULL];if(!r.test(version)){return null}try{return new SemVer(version,options)}catch(er){return null}}exports.valid=valid;function valid(version,options){var v=parse(version,options);return v?v.version:null}exports.clean=clean;function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null}exports.SemVer=SemVer;function SemVer(version,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){if(version.loose===options.loose){return version}else{version=version.version}}else if(typeof version!=="string"){throw new TypeError("Invalid Version: "+version)}if(version.length>MAX_LENGTH){throw new TypeError("version is longer than "+MAX_LENGTH+" characters")}if(!(this instanceof SemVer)){return new SemVer(version,options)}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;var m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m){throw new TypeError("Invalid Version: "+version)}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!m[4]){this.prerelease=[]}else{this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num}}return id}))}this.build=m[5]?m[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return this.compareMain(other)||this.comparePre(other)};SemVer.prototype.compareMain=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)};SemVer.prototype.comparePre=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}if(this.prerelease.length&&!other.prerelease.length){return-1}else if(!this.prerelease.length&&other.prerelease.length){return 1}else if(!this.prerelease.length&&!other.prerelease.length){return 0}var i=0;do{var a=this.prerelease[i];var b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)};SemVer.prototype.compareBuild=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}var i=0;do{var a=this.build[i];var b=other.build[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)};SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier);this.inc("pre",identifier);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier)}this.inc("pre",identifier);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){this.prerelease.push(0)}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0]}}else{this.prerelease=[identifier,0]}}break;default:throw new Error("invalid increment argument: "+release)}this.format();this.raw=this.version;return this};exports.inc=inc;function inc(version,release,loose,identifier){if(typeof loose==="string"){identifier=loose;loose=undefined}try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}}exports.diff=diff;function diff(version1,version2){if(eq(version1,version2)){return null}else{var v1=parse(version1);var v2=parse(version2);var prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1){if(key==="major"||key==="minor"||key==="patch"){if(v1[key]!==v2[key]){return prefix+key}}}return defaultResult}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a);var bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(a,b){return compareIdentifiers(b,a)}exports.major=major;function major(a,loose){return new SemVer(a,loose).major}exports.minor=minor;function minor(a,loose){return new SemVer(a,loose).minor}exports.patch=patch;function patch(a,loose){return new SemVer(a,loose).patch}exports.compare=compare;function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}exports.compareLoose=compareLoose;function compareLoose(a,b){return compare(a,b,true)}exports.compareBuild=compareBuild;function compareBuild(a,b,loose){var versionA=new SemVer(a,loose);var versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)}exports.rcompare=rcompare;function rcompare(a,b,loose){return compare(b,a,loose)}exports.sort=sort;function sort(list,loose){return list.sort((function(a,b){return exports.compareBuild(a,b,loose)}))}exports.rsort=rsort;function rsort(list,loose){return list.sort((function(a,b){return exports.compareBuild(b,a,loose)}))}exports.gt=gt;function gt(a,b,loose){return compare(a,b,loose)>0}exports.lt=lt;function lt(a,b,loose){return compare(a,b,loose)<0}exports.eq=eq;function eq(a,b,loose){return compare(a,b,loose)===0}exports.neq=neq;function neq(a,b,loose){return compare(a,b,loose)!==0}exports.gte=gte;function gte(a,b,loose){return compare(a,b,loose)>=0}exports.lte=lte;function lte(a,b,loose){return compare(a,b,loose)<=0}exports.cmp=cmp;function cmp(a,op,b,loose){switch(op){case"===":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a===b;case"!==":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}exports.Comparator=Comparator;function Comparator(comp,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp}else{comp=comp.value}}if(!(this instanceof Comparator)){return new Comparator(comp,options)}debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}var ANY={};Comparator.prototype.parse=function(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];var m=comp.match(r);if(!m){throw new TypeError("Invalid comparator: "+comp)}this.operator=m[1]!==undefined?m[1]:"";if(this.operator==="="){this.operator=""}if(!m[2]){this.semver=ANY}else{this.semver=new SemVer(m[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY||version===ANY){return true}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}return cmp(version,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}var rangeTmp;if(this.operator===""){if(this.value===""){return true}rangeTmp=new Range(comp.value,options);return satisfies(this.value,rangeTmp,options)}else if(comp.operator===""){if(comp.value===""){return true}rangeTmp=new Range(this.value,options);return satisfies(comp.semver,rangeTmp,options)}var sameDirectionIncreasing=(this.operator===">="||this.operator===">")&&(comp.operator===">="||comp.operator===">");var sameDirectionDecreasing=(this.operator==="<="||this.operator==="<")&&(comp.operator==="<="||comp.operator==="<");var sameSemVer=this.semver.version===comp.semver.version;var differentDirectionsInclusive=(this.operator===">="||this.operator==="<=")&&(comp.operator===">="||comp.operator==="<=");var oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&((this.operator===">="||this.operator===">")&&(comp.operator==="<="||comp.operator==="<"));var oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&((this.operator==="<="||this.operator==="<")&&(comp.operator===">="||comp.operator===">"));return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan};exports.Range=Range;function Range(range,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range}else{return new Range(range.raw,options)}}if(range instanceof Comparator){return new Range(range.value,options)}if(!(this instanceof Range)){return new Range(range,options)}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length}));if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+range)}this.format()}Range.prototype.format=function(){this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace);debug("hyphen replace",range);range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range,re[t.COMPARATORTRIM]);range=range.replace(re[t.TILDETRIM],tildeTrimReplace);range=range.replace(re[t.CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(" ");var compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];var set=range.split(" ").map((function(comp){return parseComparator(comp,this.options)}),this).join(" ").split(/\s+/);if(this.options.loose){set=set.filter((function(comp){return!!comp.match(compRe)}))}set=set.map((function(comp){return new Comparator(comp,this.options)}),this);return set};Range.prototype.intersects=function(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some((function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every((function(thisComparator){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))};function isSatisfiable(comparators,options){var result=true;var remainingComparators=comparators.slice();var testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every((function(otherComparator){return testComparator.intersects(otherComparator,options)}));testComparator=remainingComparators.pop()}return result}exports.toComparators=toComparators;function toComparators(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))}function parseComparator(comp,options){debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp}function isX(id){return!id||id.toLowerCase()==="x"||id==="*"}function replaceTildes(comp,options){return comp.trim().split(/\s+/).map((function(comp){return replaceTilde(comp,options)})).join(" ")}function replaceTilde(comp,options){var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(function(_,M,m,p,pr){debug("tilde",comp,_,M,m,p,pr);var ret;if(isX(M)){ret=""}else if(isX(m)){ret=">="+M+".0.0 <"+(+M+1)+".0.0"}else if(isX(p)){ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"}else if(pr){debug("replaceTilde pr",pr);ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"}else{ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0"}debug("tilde return",ret);return ret}))}function replaceCarets(comp,options){return comp.trim().split(/\s+/).map((function(comp){return replaceCaret(comp,options)})).join(" ")}function replaceCaret(comp,options){debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET];return comp.replace(r,(function(_,M,m,p,pr){debug("caret",comp,_,M,m,p,pr);var ret;if(isX(M)){ret=""}else if(isX(m)){ret=">="+M+".0.0 <"+(+M+1)+".0.0"}else if(isX(p)){if(M==="0"){ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"}else{ret=">="+M+"."+m+".0 <"+(+M+1)+".0.0"}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1)}else{ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"}}else{ret=">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1)}else{ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0"}}else{ret=">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"}}debug("caret return",ret);return ret}))}function replaceXRanges(comp,options){debug("replaceXRanges",comp,options);return comp.split(/\s+/).map((function(comp){return replaceXRange(comp,options)})).join(" ")}function replaceXRange(comp,options){comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M);var xm=xM||isX(m);var xp=xm||isX(p);var anyX=xp;if(gtlt==="="&&anyX){gtlt=""}pr=options.includePrerelease?"-0":"";if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0-0"}else{ret="*"}}else if(gtlt&&anyX){if(xm){m=0}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0}else{m=+m+1;p=0}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1}else{m=+m+1}}ret=gtlt+M+"."+m+"."+p+pr}else if(xm){ret=">="+M+".0.0"+pr+" <"+(+M+1)+".0.0"+pr}else if(xp){ret=">="+M+"."+m+".0"+pr+" <"+M+"."+(+m+1)+".0"+pr}debug("xRange return",ret);return ret}))}function replaceStars(comp,options){debug("replaceStars",comp,options);return comp.trim().replace(re[t.STAR],"")}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){if(isX(fM)){from=""}else if(isX(fm)){from=">="+fM+".0.0"}else if(isX(fp)){from=">="+fM+"."+fm+".0"}else{from=">="+from}if(isX(tM)){to=""}else if(isX(tm)){to="<"+(+tM+1)+".0.0"}else if(isX(tp)){to="<"+tM+"."+(+tm+1)+".0"}else if(tpr){to="<="+tM+"."+tm+"."+tp+"-"+tpr}else{to="<="+to}return(from+" "+to).trim()}Range.prototype.test=function(version){if(!version){return false}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}for(var i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true}}return false};function testSet(set,version,options){for(var i=0;i<set.length;i++){if(!set[i].test(version)){return false}}if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===ANY){continue}if(set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true}}}return false}return true}exports.satisfies=satisfies;function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return false}return range.test(version)}exports.maxSatisfying=maxSatisfying;function maxSatisfying(versions,range,options){var max=null;var maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}versions.forEach((function(v){if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options)}}}));return max}exports.minSatisfying=minSatisfying;function minSatisfying(versions,range,options){var min=null;var minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}versions.forEach((function(v){if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options)}}}));return min}exports.minVersion=minVersion;function minVersion(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver)){return minver}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver}minver=null;for(var i=0;i<range.set.length;++i){var comparators=range.set[i];comparators.forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++}else{compver.prerelease.push(0)}compver.raw=compver.format();case"":case">=":if(!minver||gt(minver,compver)){minver=compver}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver)){return minver}return null}exports.validRange=validRange;function validRange(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}}exports.ltr=ltr;function ltr(version,range,options){return outside(version,range,"<",options)}exports.gtr=gtr;function gtr(version,range,options){return outside(version,range,">",options)}exports.outside=outside;function outside(version,range,hilo,options){version=new SemVer(version,options);range=new Range(range,options);var gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options)){return false}for(var i=0;i<range.set.length;++i){var comparators=range.set[i];var high=null;var low=null;comparators.forEach((function(comparator){if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0")}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator}else if(ltfn(comparator.semver,low.semver,options)){low=comparator}}));if(high.operator===comp||high.operator===ecomp){return false}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false}}return true}exports.prerelease=prerelease;function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null}exports.intersects=intersects;function intersects(r1,r2,options){r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2)}exports.coerce=coerce;function coerce(version,options){if(version instanceof SemVer){return version}if(typeof version==="number"){version=String(version)}if(typeof version!=="string"){return null}options=options||{};var match=null;if(!options.rtl){match=version.match(re[t.COERCE])}else{var next;while((next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next}re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length}re[t.COERCERTL].lastIndex=-1}if(match===null){return null}return parse(match[2]+"."+(match[3]||"0")+"."+(match[4]||"0"),options)}},607:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(225);var exec_1=__webpack_require__(27);var io_1=__webpack_require__(484);var tool_cache_1=__webpack_require__(392);var path=__webpack_require__(17);var fs=__webpack_require__(147);var md5File=__webpack_require__(874);var SOURCE_DIRECTORY=path.join(process.cwd(),".source/");var INSTALL_PREFIX=path.join(process.cwd(),".lua/");var LUAROCKS_BUILD_PREFIX=".build-luarocks";var LUA_PREFIX=".lua";var LUAROCKS_PREFIX=".luarocks";var VERSION_ALIASES={5.1:"5.1.5",5.2:"5.2.4",5.3:"5.3.5",5.4:"5.4.2",luajit:"luajit-2.0.5","luajit-2.0":"luajit-2.0.5","luajit-2.1":"luajit-2.1.0-beta3"};var TARBALLS={"5.4.2":["49c92d6a49faba342c35c52e1ac3f81e","https://www.lua.org/ftp/lua-5.4.2.tar.gz"],"5.4.1":["1d575faef1c907292edd79e7a2784d30","https://www.lua.org/ftp/lua-5.4.1.tar.gz"],"5.4.0":["dbf155764e5d433fc55ae80ea7060b60","https://www.lua.org/ftp/lua-5.4.0.tar.gz"],"5.3.5":["4f4b4f323fd3514a68e0ab3da8ce3455","https://www.lua.org/ftp/lua-5.3.5.tar.gz"],"5.3.4":["53a9c68bcc0eda58bdc2095ad5cdfc63","https://www.lua.org/ftp/lua-5.3.4.tar.gz"],"5.3.3":["703f75caa4fdf4a911c1a72e67a27498","https://www.lua.org/ftp/lua-5.3.3.tar.gz"],"5.3.2":["33278c2ab5ee3c1a875be8d55c1ca2a1","https://www.lua.org/ftp/lua-5.3.2.tar.gz"],"5.3.1":["797adacada8d85761c079390ff1d9961","https://www.lua.org/ftp/lua-5.3.1.tar.gz"],"5.3.0":["a1b0a7e92d0c85bbff7a8d27bf29f8af","https://www.lua.org/ftp/lua-5.3.0.tar.gz"],"5.2.4":["913fdb32207046b273fdb17aad70be13","https://www.lua.org/ftp/lua-5.2.4.tar.gz"],"5.2.3":["dc7f94ec6ff15c985d2d6ad0f1b35654","https://www.lua.org/ftp/lua-5.2.3.tar.gz"],"5.2.2":["efbb645e897eae37cad4344ce8b0a614","https://www.lua.org/ftp/lua-5.2.2.tar.gz"],"5.2.1":["ae08f641b45d737d12d30291a5e5f6e3","https://www.lua.org/ftp/lua-5.2.1.tar.gz"],"5.2.0":["f1ea831f397214bae8a265995ab1a93e","https://www.lua.org/ftp/lua-5.2.0.tar.gz"],"5.1.5":["2e115fe26e435e33b0d5c022e4490567","https://www.lua.org/ftp/lua-5.1.5.tar.gz"],"5.1.4":["d0870f2de55d59c1c8419f36e8fac150","https://www.lua.org/ftp/lua-5.1.4.tar.gz"],"5.1.3":["a70a8dfaa150e047866dc01a46272599","https://www.lua.org/ftp/lua-5.1.3.tar.gz"],"5.1.2":["687ce4c2a1ddff18f1008490fdc4e5e0","https://www.lua.org/ftp/lua-5.1.2.tar.gz"],"5.1.1":["22f4f912f20802c11006fe9b84d5c461","https://www.lua.org/ftp/lua-5.1.1.tar.gz"],"5.1.0":["3e8dfe8be00a744cec2f9e766b2f2aee","https://www.lua.org/ftp/lua-5.1.tar.gz"],"luajit-2.0.5":["48353202cbcacab84ee41a5a70ea0a2c","https://luajit.org/download/LuaJIT-2.0.5.tar.gz"],"luajit-2.1.0-beta3":["eae40bc29d06ee5e3078f9444fcea39b","https://luajit.org/download/LuaJIT-2.1.0-beta3.tar.gz"],"luajit-2.1.0-beta2":["fa14598d0d775a7ffefb138a606e0d7b","https://luajit.org/download/LuaJIT-2.1.0-beta2.tar.gz"],"luajit-2.1.0-beta1":["5a5bf71666e77cf6e7a1ae851127b834","https://luajit.org/download/LuaJIT-2.1.0-beta1.tar.gz"],"luajit-2.0.4":["dd9c38307f2223a504cbfb96e477eca0","https://luajit.org/download/LuaJIT-2.0.4.tar.gz"],"luajit-2.0.3":["f14e9104be513913810cd59c8c658dc0","https://luajit.org/download/LuaJIT-2.0.3.tar.gz"],"luajit-2.0.2":["112dfb82548b03377fbefbba2e0e3a5b","https://luajit.org/download/LuaJIT-2.0.2.tar.gz"],"luajit-2.0.1":["85e406e8829602988eb1233a82e29f1f","https://luajit.org/download/LuaJIT-2.0.1.tar.gz"],"luajit-2.0.0":["97a2b87cc0490784f54b64cfb3b8f5ad","https://luajit.org/download/LuaJIT-2.0.0.tar.gz"]};function walkSync(dir,filelist){if(filelist===void 0){filelist=undefined}var files=fs.readdirSync(dir);filelist=filelist||[];files.forEach((function(file){var full=path.join(dir,file);if(fs.statSync(full).isDirectory()){filelist=walkSync(full,filelist)}else{filelist.push(full)}}));return filelist}function showDirectory(d){for(var _i=0,_a=walkSync(d);_i<_a.length;_i++){var i=_a[_i];console.log(i)}}function mergeDirectory(source,dest){var files=fs.readdirSync(source);for(var _i=0,files_1=files;_i<files_1.length;_i++){var i=files_1[_i];var full=path.join(source,i);var to=path.join(dest,i);var stats=fs.lstatSync(full);if(stats.isDirectory()){mergeDirectory(full,to)}else{(0,io_1.mkdirP)(path.dirname(to));(0,io_1.cp)(full,to)}}}function getTarball(version){var v=VERSION_ALIASES[version]||version;if(!TARBALLS[v]||TARBALLS[v].length!=2){throw RangeError("Unsupported lua version: "+version)}return[TARBALLS[v][1],TARBALLS[v][0]]}function getLuaVersion(){var luaVersion=(0,core_1.getInput)("lua-version",{required:false});return VERSION_ALIASES[luaVersion]||luaVersion||"5.1.5"}function getLuaRocksVersion(){var luaRocksVersion=(0,core_1.getInput)("luarocks-version",{required:false});return luaRocksVersion}function getPlatform(){var platform=(0,core_1.getInput)("platfrom",{required:false});return platform||undefined}function download(url,hash){return __awaiter(this,void 0,void 0,(function(){var luaSourceTar;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,(0,tool_cache_1.downloadTool)(url)];case 1:luaSourceTar=_a.sent();if(hash!=md5File.sync(luaSourceTar)){throw Error("MD5 mismatch, please check your network.")}return[2,luaSourceTar]}}))}))}function tarballContentDirectory(version){if(version.startsWith("luajit")){var luajitVersion=getLuaVersion().substr("luajit-".length);return"LuaJIT-".concat(luajitVersion)}return"lua-".concat(version)}function extractTarball(tarball,version){return __awaiter(this,void 0,void 0,(function(){var dir;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,(0,io_1.mkdirP)(SOURCE_DIRECTORY)];case 1:_a.sent();return[4,(0,exec_1.exec)('cmake -E tar xzf "'.concat(tarball,'"'),undefined,{cwd:SOURCE_DIRECTORY})];case 2:_a.sent();showDirectory(SOURCE_DIRECTORY);dir=tarballContentDirectory(version);return[2,path.join(SOURCE_DIRECTORY,dir)]}}))}))}function downloadSource(luaVersion){return __awaiter(this,void 0,void 0,(function(){var _a,url,hash,tarball;return __generator(this,(function(_b){switch(_b.label){case 0:_a=getTarball(luaVersion),url=_a[0],hash=_a[1];return[4,download(url,hash)];case 1:tarball=_b.sent();return[2,extractTarball(tarball,luaVersion)]}}))}))}function installSystemDependencies(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:if(!(process.platform=="linux"))return[3,2];return[4,(0,exec_1.exec)("sudo apt-get install -q libreadline-dev libncurses-dev",undefined,{env:{DEBIAN_FRONTEND:"noninteractive",TERM:"linux"}})];case 1:return[2,_a.sent()];case 2:if(process.platform=="darwin"){return[2]}if(process.platform=="win32"){return[2]}return[2]}}))}))}function addCMakeBuildScripts(sourcePath,luaVersion){return __awaiter(this,void 0,void 0,(function(){var v;return __generator(this,(function(_a){fs.unlinkSync(path.join(sourcePath,"src","luaconf.h"));mergeDirectory(path.join(__dirname,"..","patch","shared"),sourcePath);v=luaVersion.replace(/\.\d*$/,"");mergeDirectory(path.join(__dirname,"..","patch","lua",v),sourcePath);console.log("VERSION: "+v);showDirectory(sourcePath);return[2]}))}))}function buildAndInstall(sourcePath,platform){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:if(!platform)return[3,2];return[4,(0,exec_1.exec)('cmake -H"'.concat(sourcePath,'" -Bbuild -DCMAKE_INSTALL_PREFIX=').concat(INSTALL_PREFIX," -A").concat(platform),undefined,{cwd:sourcePath})];case 1:_a.sent();return[3,4];case 2:return[4,(0,exec_1.exec)('cmake -H"'.concat(sourcePath,'" -Bbuild -DCMAKE_INSTALL_PREFIX=').concat(INSTALL_PREFIX),undefined,{cwd:sourcePath})];case 3:_a.sent();_a.label=4;case 4:return[4,(0,exec_1.exec)("cmake --build build --config Release --target install",undefined,{cwd:sourcePath})];case 5:_a.sent();(0,core_1.addPath)(path.join(INSTALL_PREFIX,"bin"));return[2]}}))}))}function installLuaRocks(luaRocksVersion,platform){return __awaiter(this,void 0,void 0,(function(){var luaRocksExtractPath,luaRocksInstallPath,luaInstallPath,sourceTar,configureArgs,lrPath_1,luaPath_1,luaCpath_1,arch,sourceZip,binInstallPath_1,extractPath,extractedFolder_1,luaVersion,shortLuaVersion;return __generator(this,(function(_a){switch(_a.label){case 0:luaRocksExtractPath=path.join(process.env["RUNNER_TEMP"],LUAROCKS_BUILD_PREFIX,"luarocks-".concat(luaRocksVersion));luaRocksInstallPath=path.join(process.cwd(),LUAROCKS_PREFIX);luaInstallPath=path.join(process.cwd(),LUA_PREFIX);if(!(process.platform!="win32"))return[3,12];return[4,(0,tool_cache_1.downloadTool)("https://luarocks.org/releases/luarocks-".concat(luaRocksVersion,".tar.gz"))];case 1:sourceTar=_a.sent();return[4,(0,io_1.mkdirP)(luaRocksExtractPath)];case 2:_a.sent();return[4,(0,tool_cache_1.extractTar)(sourceTar,path.join(process.env["RUNNER_TEMP"],LUAROCKS_BUILD_PREFIX))];case 3:_a.sent();configureArgs=[];configureArgs.push('--with-lua="'.concat(luaInstallPath,'"'));configureArgs.push('--prefix="'.concat(luaRocksInstallPath,'"'));return[4,(0,exec_1.exec)("./configure ".concat(configureArgs.join(" ")),undefined,{cwd:luaRocksExtractPath})];case 4:_a.sent();return[4,(0,exec_1.exec)("make",undefined,{cwd:luaRocksExtractPath})];case 5:_a.sent();if(!luaRocksVersion.match(/^2\./))return[3,7];return[4,(0,exec_1.exec)("make build",undefined,{cwd:luaRocksExtractPath})];case 6:_a.sent();_a.label=7;case 7:return[4,(0,exec_1.exec)("make install",undefined,{cwd:luaRocksExtractPath})];case 8:_a.sent();lrPath_1="";return[4,(0,exec_1.exec)("".concat(path.join(luaRocksInstallPath,"bin","luarocks")," path --lr-bin"),undefined,{listeners:{stdout:function(data){lrPath_1+=data.toString()}}})];case 9:_a.sent();if(lrPath_1!=""){(0,core_1.addPath)(lrPath_1.trim())}luaPath_1="";return[4,(0,exec_1.exec)("luarocks path --lr-path",undefined,{listeners:{stdout:function(data){luaPath_1+=data.toString()}}})];case 10:_a.sent();luaPath_1=luaPath_1.trim();luaCpath_1="";return[4,(0,exec_1.exec)("luarocks path --lr-cpath",undefined,{listeners:{stdout:function(data){luaCpath_1+=data.toString()}}})];case 11:_a.sent();luaCpath_1=luaCpath_1.trim();if(luaPath_1!=""){(0,core_1.exportVariable)("LUA_PATH",";;"+luaPath_1)}if(luaCpath_1!=""){(0,core_1.exportVariable)("LUA_CPATH",";;"+luaCpath_1)}return[3,24];case 12:arch=platform&&platform=="x64"?"64":"32";return[4,(0,tool_cache_1.downloadTool)("https://luarocks.github.io/luarocks/releases/luarocks-".concat(luaRocksVersion,"-windows-").concat(arch,".zip"))];case 13:sourceZip=_a.sent();return[4,(0,io_1.mkdirP)(luaRocksInstallPath)];case 14:_a.sent();binInstallPath_1=path.join(luaRocksInstallPath,"bin");return[4,(0,io_1.mkdirP)(binInstallPath_1)];case 15:_a.sent();extractPath=path.join(process.env["RUNNER_TEMP"],"luarocks");return[4,(0,io_1.mkdirP)(extractPath)];case 16:_a.sent();return[4,(0,tool_cache_1.extractZip)(sourceZip,extractPath)];case 17:_a.sent();extractedFolder_1=path.join(extractPath,"luarocks-".concat(luaRocksVersion,"-windows-").concat(arch));return[4,fs.stat(path.join(extractedFolder_1,"luarocks-admin.exe"),(function(err,stat){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:if(!(err==null))return[3,2];return[4,(0,io_1.mv)(path.join(extractedFolder_1,"luarocks-admin.exe"),binInstallPath_1)];case 1:_a.sent();_a.label=2;case 2:return[2]}}))}))}))];case 18:_a.sent();return[4,(0,io_1.mv)(path.join(extractedFolder_1,"luarocks.exe"),binInstallPath_1)];case 19:_a.sent();showDirectory(binInstallPath_1);(0,core_1.addPath)(binInstallPath_1);if(arch=="64"){(0,io_1.mkdirP)("C:/Program Files/luarocks/")}else{(0,io_1.mkdirP)("C:/Program Files (x86)/luarocks/")}(0,io_1.mkdirP)("".concat(process.env.APPDATA,"\\luarocks"));luaVersion=getLuaVersion();shortLuaVersion=luaVersion.split(".").slice(0,2).join(".");return[4,(0,exec_1.exec)("luarocks config --scope system lua_dir ".concat(luaInstallPath),undefined,{cwd:binInstallPath_1})];case 20:_a.sent();return[4,(0,exec_1.exec)("luarocks config --scope system lua_version ".concat(shortLuaVersion),undefined,{cwd:binInstallPath_1})];case 21:_a.sent();return[4,(0,exec_1.exec)("luarocks config --scope user lua_dir ".concat(luaInstallPath),undefined,{cwd:binInstallPath_1})];case 22:_a.sent();return[4,(0,exec_1.exec)("luarocks config --scope user lua_version ".concat(shortLuaVersion),undefined,{cwd:binInstallPath_1})];case 23:_a.sent();_a.label=24;case 24:return[2]}}))}))}function main(){return __awaiter(this,void 0,void 0,(function(){var luaVersion,luaRocksVersion,platform,sourcePath,isLuaRocks;return __generator(this,(function(_a){switch(_a.label){case 0:luaVersion=getLuaVersion();luaRocksVersion=getLuaRocksVersion();platform=getPlatform();return[4,installSystemDependencies()];case 1:_a.sent();return[4,downloadSource(luaVersion)];case 2:sourcePath=_a.sent();return[4,addCMakeBuildScripts(sourcePath,luaVersion)];case 3:_a.sent();return[4,buildAndInstall(sourcePath,platform)];case 4:_a.sent();isLuaRocks=(0,core_1.getInput)("install-luarocks",{required:false});if(!(isLuaRocks=="true"))return[3,6];return[4,installLuaRocks(luaRocksVersion,platform)];case 5:_a.sent();_a.label=6;case 6:return[2]}}))}))}main()},149:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__(468)},468:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var net=__webpack_require__(808);var tls=__webpack_require__(404);var http=__webpack_require__(685);var https=__webpack_require__(687);var events=__webpack_require__(361);var assert=__webpack_require__(491);var util=__webpack_require__(837);exports.httpOverHttp=httpOverHttp;exports.httpsOverHttp=httpsOverHttp;exports.httpOverHttps=httpOverHttps;exports.httpsOverHttps=httpsOverHttps;function httpOverHttp(options){var agent=new TunnelingAgent(options);agent.request=http.request;return agent}function httpsOverHttp(options){var agent=new TunnelingAgent(options);agent.request=http.request;agent.createSocket=createSecureSocket;agent.defaultPort=443;return agent}function httpOverHttps(options){var agent=new TunnelingAgent(options);agent.request=https.request;return agent}function httpsOverHttps(options){var agent=new TunnelingAgent(options);agent.request=https.request;agent.createSocket=createSecureSocket;agent.defaultPort=443;return agent}function TunnelingAgent(options){var self=this;self.options=options||{};self.proxyOptions=self.options.proxy||{};self.maxSockets=self.options.maxSockets||http.Agent.defaultMaxSockets;self.requests=[];self.sockets=[];self.on("free",(function onFree(socket,host,port,localAddress){var options=toOptions(host,port,localAddress);for(var i=0,len=self.requests.length;i<len;++i){var pending=self.requests[i];if(pending.host===options.host&&pending.port===options.port){self.requests.splice(i,1);pending.request.onSocket(socket);return}}socket.destroy();self.removeSocket(socket)}))}util.inherits(TunnelingAgent,events.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(req,host,port,localAddress){var self=this;var options=mergeOptions({request:req},self.options,toOptions(host,port,localAddress));if(self.sockets.length>=this.maxSockets){self.requests.push(options);return}self.createSocket(options,(function(socket){socket.on("free",onFree);socket.on("close",onCloseOrRemove);socket.on("agentRemove",onCloseOrRemove);req.onSocket(socket);function onFree(){self.emit("free",socket,options)}function onCloseOrRemove(err){self.removeSocket(socket);socket.removeListener("free",onFree);socket.removeListener("close",onCloseOrRemove);socket.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(options,cb){var self=this;var placeholder={};self.sockets.push(placeholder);var connectOptions=mergeOptions({},self.proxyOptions,{method:"CONNECT",path:options.host+":"+options.port,agent:false,headers:{host:options.host+":"+options.port}});if(options.localAddress){connectOptions.localAddress=options.localAddress}if(connectOptions.proxyAuth){connectOptions.headers=connectOptions.headers||{};connectOptions.headers["Proxy-Authorization"]="Basic "+new Buffer(connectOptions.proxyAuth).toString("base64")}debug("making CONNECT request");var connectReq=self.request(connectOptions);connectReq.useChunkedEncodingByDefault=false;connectReq.once("response",onResponse);connectReq.once("upgrade",onUpgrade);connectReq.once("connect",onConnect);connectReq.once("error",onError);connectReq.end();function onResponse(res){res.upgrade=true}function onUpgrade(res,socket,head){process.nextTick((function(){onConnect(res,socket,head)}))}function onConnect(res,socket,head){connectReq.removeAllListeners();socket.removeAllListeners();if(res.statusCode!==200){debug("tunneling socket could not be established, statusCode=%d",res.statusCode);socket.destroy();var error=new Error("tunneling socket could not be established, "+"statusCode="+res.statusCode);error.code="ECONNRESET";options.request.emit("error",error);self.removeSocket(placeholder);return}if(head.length>0){debug("got illegal response body from proxy");socket.destroy();var error=new Error("got illegal response body from proxy");error.code="ECONNRESET";options.request.emit("error",error);self.removeSocket(placeholder);return}debug("tunneling connection has established");self.sockets[self.sockets.indexOf(placeholder)]=socket;return cb(socket)}function onError(cause){connectReq.removeAllListeners();debug("tunneling socket could not be established, cause=%s\n",cause.message,cause.stack);var error=new Error("tunneling socket could not be established, "+"cause="+cause.message);error.code="ECONNRESET";options.request.emit("error",error);self.removeSocket(placeholder)}};TunnelingAgent.prototype.removeSocket=function removeSocket(socket){var pos=this.sockets.indexOf(socket);if(pos===-1){return}this.sockets.splice(pos,1);var pending=this.requests.shift();if(pending){this.createSocket(pending,(function(socket){pending.request.onSocket(socket)}))}};function createSecureSocket(options,cb){var self=this;TunnelingAgent.prototype.createSocket.call(self,options,(function(socket){var hostHeader=options.request.getHeader("host");var tlsOptions=mergeOptions({},self.options,{socket,servername:hostHeader?hostHeader.replace(/:.*$/,""):options.host});var secureSocket=tls.connect(0,tlsOptions);self.sockets[self.sockets.indexOf(socket)]=secureSocket;cb(secureSocket)}))}function toOptions(host,port,localAddress){if(typeof host==="string"){return{host,port,localAddress}}return host}function mergeOptions(target){for(var i=1,len=arguments.length;i<len;++i){var overrides=arguments[i];if(typeof overrides==="object"){var keys=Object.keys(overrides);for(var j=0,keyLen=keys.length;j<keyLen;++j){var k=keys[j];if(overrides[k]!==undefined){target[k]=overrides[k]}}}}return target}var debug;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){debug=function(){var args=Array.prototype.slice.call(arguments);if(typeof args[0]==="string"){args[0]="TUNNEL: "+args[0]}else{args.unshift("TUNNEL:")}console.error.apply(console,args)}}else{debug=function(){}}exports.debug=debug},327:module=>{var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},556:(module,__unused_webpack_exports,__webpack_require__)=>{var crypto=__webpack_require__(113);module.exports=function nodeRNG(){return crypto.randomBytes(16)}},358:(module,__unused_webpack_exports,__webpack_require__)=>{var rng=__webpack_require__(556);var bytesToUuid=__webpack_require__(327);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},491:module=>{"use strict";module.exports=require("assert")},81:module=>{"use strict";module.exports=require("child_process")},113:module=>{"use strict";module.exports=require("crypto")},361:module=>{"use strict";module.exports=require("events")},147:module=>{"use strict";module.exports=require("fs")},685:module=>{"use strict";module.exports=require("http")},687:module=>{"use strict";module.exports=require("https")},808:module=>{"use strict";module.exports=require("net")},37:module=>{"use strict";module.exports=require("os")},17:module=>{"use strict";module.exports=require("path")},781:module=>{"use strict";module.exports=require("stream")},576:module=>{"use strict";module.exports=require("string_decoder")},512:module=>{"use strict";module.exports=require("timers")},404:module=>{"use strict";module.exports=require("tls")},837:module=>{"use strict";module.exports=require("util")}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__);return module.exports}var __webpack_exports__=__webpack_require__(607)})();
//# sourceMappingURL=index.js.map